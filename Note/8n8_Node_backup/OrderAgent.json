{
  "name": "OrderAgent",
  "nodes": [
    {
      "parameters": {
        "multipleMethods": true,
        "httpMethod": [
          "POST"
        ],
        "path": "108cb063-f28d-4b38-9a58-02356d9853fc",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        0,
        0
      ],
      "id": "11fc546e-4a28-4d2e-bd43-46865ef0b6e6",
      "name": "Webhook",
      "webhookId": "108cb063-f28d-4b38-9a58-02356d9853fc",
      "notesInFlow": true
    },
    {
      "parameters": {
        "amount": 20
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        240,
        -120
      ],
      "id": "3f2d598e-0bcd-4f35-b9dc-bdd10a24ad0d",
      "name": "Wait",
      "webhookId": "3aad8e13-7994-4087-9035-b3bef2f57c91"
    },
    {
      "parameters": {
        "url": "=https://api.vapi.ai/call/{{ $('Webhook').item.json.body.message.call.id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        480,
        -140
      ],
      "id": "8a4e5e47-9464-4d7d-93fc-836138065b9a",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are an assistant for processing restaurant phone orders. Parse the following summary and extract the required information to fill in the JSON template below. Use the provided current time for \"time_ordered\". If a field isn’t provided (e.g., address for pickup), leave it as an empty string (\"\").\n\n1. Extract and return only the information below in **valid JSON** format, using the provided summary. Do not include any additional text, messages, notes, or Markdown formatting (e.g., ```json). Do not include any timestamp or time_ordered fields. Include all order items from the summary, numbering them sequentially (order_item_1, order_item_2, etc.).\n\nSummary: {{ $json.body.message.analysis.summary }}\n\n## FORMAT:\n{\n  \"order_type\": \"<Pickup or Delivery>\",\n  \"caller_name\": \"<Full name of caller>\",\n  \"caller_phone\": \"<Phone number in format XXX-XXX-XXXX>\",\n  \"caller_email\": \"<Email address if provided, otherwise empty>\",\n  \"caller_address\": \"<Street address if delivery, otherwise empty>\",\n  \"caller_city\": \"<City if delivery, otherwise empty>\",\n  \"caller_state\": \"<State if delivery, otherwise empty>\",\n  \"caller_zip\": \"<ZIP code if delivery, otherwise empty>\",\n  \"order_item_1\": \"<First ordered item>\",\n  \"qty_1\": \"<Quantity as a string>\",\n  \"modifier_1\": \"<Modifiers/special requests for item 1 or empty>\",\n  \"order_item_2\": \"<Second item if any>\",\n  \"qty_2\": \"<Quantity as string>\",\n  \"modifier_2\": \"<Modifiers or empty>\",\n  ...\n}\n\n\n## GUIDELINES:\n- If a field isn’t provided (e.g., address for pickup), leave it as an empty string (\"\").\n- Extract quantities and modifiers from the summary.\n- Format phone numbers as XXX-XXX-XXXX.\n- Continue numbering order items (order_item_3, qty_3, modifier_3, etc.) for all items in the summary.\n- Do not include any fields related to time, such as time_ordered.\n- Return only the JSON object, with no additional text, messages, or Markdown.\n\n",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        820,
        0
      ],
      "id": "488c439a-2f81-4556-b561-31eabd6b1914",
      "name": "AI Agent",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2320,
        -40
      ],
      "id": "ecc7f29c-cfba-462d-ba8e-67da489021f7",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "NTvwPRHDfjXZYh59",
          "name": "n8n free OpenAI API credits"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const data = JSON.parse($json.output); // $json refers to the json property of the input item\nreturn data; // Or return { json: data } if you want it nested under json again for the next node"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1180,
        0
      ],
      "id": "27cbeebe-66ac-4b3a-b36b-ffa0970bbdb1",
      "name": "Code",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE",
          "mode": "list",
          "cachedResultName": "customer order",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "orderItems",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Order_type": "={{ $json.order_type }}",
            "Caller_name": "={{ $json.caller_name }}",
            "Caller_phone": "={{ $json.caller_phone }}",
            "Order_item_1": "={{ $json.order_item_1 }}",
            "Qty_1": "={{ $json.qty_1 }}",
            "modifier_1": "={{ $json.modifier_1 }}",
            "Order_item_2": "={{ $json.order_item_2 }}",
            "Qty_2": "={{ $json.qty_2 }}",
            "modifier_2": "={{ $json.modifier_2 }}",
            "Order_item_3": "={{ $json.order_item_3 }}",
            "Qty_3": "={{ $json.qty_3 }}",
            "modifier_3": "={{ $json.modifier_3 }}",
            "Order_item_4": "={{ $json.order_item_4 }}",
            "Qty_4": "={{ $json.qty_4 }}",
            "modifier_4": "={{ $json.modifier_4 }}",
            "Order_item_5": "={{ $json.order_item_5 }}",
            "Qty_5": "={{ $json.qty_5 }}",
            "modifier_5": "={{ $json.modifier_5 }}",
            "Order_item_6": "={{ $json.order_item_6 }}",
            "Qty_6": "={{ $json.qty_6 }}",
            "modifier_6": "={{ $json.modifier_6 }}",
            "Order_item_7": "={{ $json.order_item_7 }}",
            "Qty_7": "={{ $json.qty_7 }}",
            "modifier_7": "={{ $json.modifier_7 }}",
            "Order_item_8": "={{ $json.order_item_8 }}",
            "Qty_8": "={{ $json.qty_8 }}",
            "modifier_8": "={{ $json.modifier_8 }}",
            "Order_item_9": "={{ $json.order_item_9 }}",
            "Qty_9": "={{ $json.qty_9 }}",
            "modifier_9": "={{ $json.modifier_9 }}",
            "Order_item_10": "={{ $json.order_item_10 }}",
            "Qty_10": "={{ $json.qty_10 }}",
            "modifier_10": "={{ $json.modifier_10 }}",
            "Order_item_11": "={{ $json.order_item_11 }}",
            "Qty_11": "={{ $json.qty_11 }}",
            "modifier_11": "={{ $json.modifier_11 }}",
            "Order_item_12": "={{ $json.order_item_12 }}",
            "Qty_12": "={{ $json.qty_12 }}",
            "modifier_12": "={{ $json.modifier_13 }}",
            "Order_item_13": "={{ $json.order_item_13 }}",
            "Qty_13": "={{ $json.qty_13 }}",
            "modifier_13": "={{ $json.modifier_13 }}",
            "Order_item_14": "={{ $json.order_item_14 }}",
            "Qty_14": "={{ $json.qty_14 }}",
            "modifier_14": "={{ $json.modifier_14 }}",
            "Order_item_15": "={{ $json.modifier_15 }}",
            "Qty_15": "={{ $json.order_item_15 }}",
            "modifier_15": "={{ $json.modifier_15 }}",
            "Order_item_16": "={{ $json.order_item_16 }}",
            "Qty_16": "={{ $json.qty_16 }}",
            "modifier_16": "={{ $json.modifier_16 }}",
            "Order_item_17": "={{ $json.order_item_17 }}",
            "Qty_17": "={{ $json.qty_17 }}",
            "modifier_17": "={{ $json.modifier_17 }}",
            "Order_item_18": "={{ $json.order_item_18 }}",
            "Qty_18": "={{ $json.qty_18 }}",
            "modifier_18": "={{ $json.modifier_18 }}",
            "Order_item_19": "={{ $json.order_item_19 }}",
            "Qty_19": "={{ $json.qty_19 }}",
            "modifier_19": "={{ $json.qty_19 }}",
            "Time_ordered": "={{ $now }}",
            "Caller_address": "={{ $json.caller_address }}",
            "Caller_City": "={{ $json.caller_city }}",
            "Caller_State": "={{ $json.caller_state }}",
            "Caller_Zip": "={{ $json.caller_zip }}",
            "Email": "={{ $json.caller_email }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Order_type",
              "displayName": "Order_type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Time_ordered",
              "displayName": "Time_ordered",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Printed to PDF (timestamp)",
              "displayName": "Printed to PDF (timestamp)",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "OrderNum",
              "displayName": "OrderNum",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Caller_name",
              "displayName": "Caller_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Caller_phone",
              "displayName": "Caller_phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Caller_address",
              "displayName": "Caller_address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Caller_City",
              "displayName": "Caller_City",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Caller_State",
              "displayName": "Caller_State",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Caller_Zip",
              "displayName": "Caller_Zip",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_1",
              "displayName": "Order_item_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_1",
              "displayName": "Qty_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_1",
              "displayName": "modifier_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_2",
              "displayName": "Order_item_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_2",
              "displayName": "Qty_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_2",
              "displayName": "modifier_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_3",
              "displayName": "Order_item_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_3",
              "displayName": "Qty_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_3",
              "displayName": "modifier_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_4",
              "displayName": "Order_item_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_4",
              "displayName": "Qty_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_4",
              "displayName": "modifier_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_5",
              "displayName": "Order_item_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_5",
              "displayName": "Qty_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_5",
              "displayName": "modifier_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_6",
              "displayName": "Order_item_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_6",
              "displayName": "Qty_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_6",
              "displayName": "modifier_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_7",
              "displayName": "Order_item_7",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_7",
              "displayName": "Qty_7",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_7",
              "displayName": "modifier_7",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_8",
              "displayName": "Order_item_8",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_8",
              "displayName": "Qty_8",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_8",
              "displayName": "modifier_8",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_9",
              "displayName": "Order_item_9",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_9",
              "displayName": "Qty_9",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_9",
              "displayName": "modifier_9",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_10",
              "displayName": "Order_item_10",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_10",
              "displayName": "Qty_10",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_10",
              "displayName": "modifier_10",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_11",
              "displayName": "Order_item_11",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_11",
              "displayName": "Qty_11",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_11",
              "displayName": "modifier_11",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_12",
              "displayName": "Order_item_12",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_12",
              "displayName": "Qty_12",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_12",
              "displayName": "modifier_12",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_13",
              "displayName": "Order_item_13",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_13",
              "displayName": "Qty_13",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_13",
              "displayName": "modifier_13",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_14",
              "displayName": "Order_item_14",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_14",
              "displayName": "Qty_14",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_14",
              "displayName": "modifier_14",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_15",
              "displayName": "Order_item_15",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_15",
              "displayName": "Qty_15",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_15",
              "displayName": "modifier_15",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_16",
              "displayName": "Order_item_16",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_16",
              "displayName": "Qty_16",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_16",
              "displayName": "modifier_16",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_17",
              "displayName": "Order_item_17",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_17",
              "displayName": "Qty_17",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_17",
              "displayName": "modifier_17",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_18",
              "displayName": "Order_item_18",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_18",
              "displayName": "Qty_18",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_18",
              "displayName": "modifier_18",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_19",
              "displayName": "Order_item_19",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_19",
              "displayName": "Qty_19",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_19",
              "displayName": "modifier_19",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Order_item_20",
              "displayName": "Order_item_20",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Qty_20",
              "displayName": "Qty_20",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_20",
              "displayName": "modifier_20",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": " ",
              "displayName": " ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "output",
              "displayName": "output",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_type",
              "displayName": "order_type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "caller_name",
              "displayName": "caller_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "caller_phone",
              "displayName": "caller_phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "caller_email",
              "displayName": "caller_email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "caller_address",
              "displayName": "caller_address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "caller_city",
              "displayName": "caller_city",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "caller_state",
              "displayName": "caller_state",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "caller_zip",
              "displayName": "caller_zip",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_1",
              "displayName": "order_item_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_1",
              "displayName": "qty_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_2",
              "displayName": "order_item_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_2",
              "displayName": "qty_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_3",
              "displayName": "order_item_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_3",
              "displayName": "qty_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_4",
              "displayName": "order_item_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_4",
              "displayName": "qty_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_5",
              "displayName": "order_item_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_5",
              "displayName": "qty_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_6",
              "displayName": "order_item_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_6",
              "displayName": "qty_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_7",
              "displayName": "order_item_7",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_7",
              "displayName": "qty_7",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_8",
              "displayName": "order_item_8",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_8",
              "displayName": "qty_8",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_9",
              "displayName": "order_item_9",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_9",
              "displayName": "qty_9",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_10",
              "displayName": "order_item_10",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_10",
              "displayName": "qty_10",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_11",
              "displayName": "order_item_11",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_11",
              "displayName": "qty_11",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_12",
              "displayName": "order_item_12",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_12",
              "displayName": "qty_12",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_13",
              "displayName": "order_item_13",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_13",
              "displayName": "qty_13",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_14",
              "displayName": "order_item_14",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_14",
              "displayName": "qty_14",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_15",
              "displayName": "order_item_15",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_15",
              "displayName": "qty_15",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_16",
              "displayName": "order_item_16",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_16",
              "displayName": "qty_16",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_17",
              "displayName": "order_item_17",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_17",
              "displayName": "qty_17",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_18",
              "displayName": "order_item_18",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_18",
              "displayName": "qty_18",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_19",
              "displayName": "order_item_19",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_19",
              "displayName": "qty_19",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_20",
              "displayName": "order_item_20",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_20",
              "displayName": "qty_20",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "order_item_21",
              "displayName": "order_item_21",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qty_21",
              "displayName": "qty_21",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "modifier_21",
              "displayName": "modifier_21",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "cellFormat": "USER_ENTERED"
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        1400,
        0
      ],
      "id": "6ce12091-7e00-4352-83ba-6dea203c4549",
      "name": "Google Sheets",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VE9ZtYXhrCCSFK27",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "instructions": "Summarized the information into an\nEmail address:{{ Email }}\nemail body:\n\"Thank you for your order with Terrance Restaurant! Here’s a summary of your order:\n\nItems Ordered:\n\t•\t [Item 1] X [Qty_1]: [modifier_1] \n\t•\t [Item 2] X [Qty_2]: [modifier_2] \n\t•\t [Item 3] X [Qty_3]: [modifier_3] \n(Add as needed)\n\nWe’re preparing your order and it will ready for pickup in 20-25 minutes.\nIf you have any questions, feel free to call us at 347-991-8888.\"\nFormat item order using <li></li>",
        "codeGeneratedForPrompt": "Summarized the information into an\nEmail address:{{ Email }}\nemail body:\n\"Thank you for your order with Terrance Restaurant! Here’s a summary of your order:\n\nItems Ordered:\n\t•\t [Item 1] X [Qty_1]: [modifier_1] \n\t•\t [Item 2] X [Qty_2]: [modifier_2] \n\t•\t [Item 3] X [Qty_3]: [modifier_3] \n(Add as needed)\n\nWe’re preparing your order and it will ready for pickup in 20-25 minutes.\nIf you have any questions, feel free to call us at 347-991-8888.\"\nFormat item order using <li></li>",
        "jsCode": "const items = $input.all();\nconst emailBody = items.map((item) => {\n  let orderSummary = \"\";\n  for (let i = 1; i <= 19; i++) {\n    if (item.json[`Order_item_${i}`] && item.json[`Qty_${i}`]) {\n      orderSummary += `<li>${item.json[`Order_item_${i}`]} X ${item.json[`Qty_${i}`]}: ${item.json[`modifier_${i}`]}</li>`;\n    }\n  }\n  return {\n    Email: item.json.Email,\n    emailBody: `Thank you for your order with Terrance Restaurant! Here’s a summary of your order:<ul>${orderSummary}</ul>We’re preparing your order and it will ready for pickup in 20-25 minutes. If you have any questions, feel free to call us at 347-991-8888.`,\n  };\n});\nreturn emailBody;\n"
      },
      "type": "n8n-nodes-base.aiTransform",
      "typeVersion": 1,
      "position": [
        1620,
        0
      ],
      "id": "9e4a8862-0cbf-42b7-9050-85e659c71ba3",
      "name": "AI Transform1"
    },
    {
      "parameters": {
        "sendTo": "={{ $json.Email }}",
        "subject": "Terrance Restaurant Order Confirmation",
        "message": "={{ $json.emailBody }}",
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        1840,
        0
      ],
      "id": "452aee49-f279-47f6-a8fa-2a4858fb9ef2",
      "name": "Gmail",
      "webhookId": "14b6c948-e6ec-48a4-a0fc-8b16577fe83c",
      "credentials": {
        "gmailOAuth2": {
          "id": "ZxOK0Q19ctZu1nuM",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "7417acc2-00bf-4141-b5dd-1562c7b947b0",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        60,
        420
      ],
      "id": "7c8e89b0-492a-4a5f-b007-429b929d97c8",
      "name": "Webhook1",
      "webhookId": "7417acc2-00bf-4141-b5dd-1562c7b947b0"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE",
          "mode": "list",
          "cachedResultName": "customer order",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 43185337,
          "mode": "list",
          "cachedResultName": "Reservation",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE/edit#gid=43185337"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Caller_name": "= {{ $('Code1').item.json.merged_data.Caller_name }}",
            "Caller_phone": "={{ $('AI Transform').item.json.Caller_phone }}",
            "Caller_email": "= {{ $('Code1').item.json.merged_data.Caller_email }}",
            "DateTime": "= {{ $('Code1').item.json.merged_data.DateTime }}",
            "Rserv_Date": "= {{ $('Code1').item.json.merged_data.Rserv_Date }}",
            "Rerv_Time": "= {{ $('Code1').item.json.merged_data.Rerv_Time }}",
            "#OfGuest": "={{ $('Code1').item.json.merged_data[\"#OfGuest\"] }} ",
            "Special_request": "= {{ $('Code1').item.json.merged_data.Special_request }}",
            "Call summary": "= {{ $('Code1').item.json.merged_data.Call_summary }}",
            "Category": "= {{ $('Code1').item.json.merged_data.Category }}"
          },
          "matchingColumns": [
            "Caller_phone"
          ],
          "schema": [
            {
              "id": "Category",
              "displayName": "Category",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Caller_name",
              "displayName": "Caller_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Caller_phone",
              "displayName": "Caller_phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Caller_email",
              "displayName": "Caller_email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "DateTime",
              "displayName": "DateTime",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Rserv_Date",
              "displayName": "Rserv_Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Rerv_Time",
              "displayName": "Rerv_Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "#OfGuest",
              "displayName": "#OfGuest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Special_request",
              "displayName": "Special_request",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Call summary",
              "displayName": "Call summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Cancelled",
              "displayName": "Cancelled",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": " ",
              "displayName": " ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.6,
      "position": [
        2240,
        640
      ],
      "id": "2a96a5d1-54f0-4706-9bc1-3148ab8590c0",
      "name": "update_reservation",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "7suXScg1lT486Pag",
          "name": "Google Sheets account 3"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Update row in sheet in Google Sheets",
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE",
          "mode": "list",
          "cachedResultName": "customer order",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 43185337,
          "mode": "list",
          "cachedResultName": "Reservation",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE/edit#gid=43185337"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Cancelled": "={{ $('AI Transform').item.json.Cancellation }}",
            "Caller_phone": "={{ $('AI Transform').item.json.Phone_number }}",
            "Category": "={{ $('AI Transform').item.json.Category }}"
          },
          "matchingColumns": [
            "Caller_phone"
          ],
          "schema": [
            {
              "id": "Category",
              "displayName": "Category",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Caller_name",
              "displayName": "Caller_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Caller_phone",
              "displayName": "Caller_phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Caller_email",
              "displayName": "Caller_email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "DateTime",
              "displayName": "DateTime",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Rserv_Date",
              "displayName": "Rserv_Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Rerv_Time",
              "displayName": "Rerv_Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "#OfGuest",
              "displayName": "#OfGuest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Special_request",
              "displayName": "Special_request",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Call summary",
              "displayName": "Call summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Cancelled",
              "displayName": "Cancelled",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": " ",
              "displayName": " ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.6,
      "position": [
        2620,
        640
      ],
      "id": "b9e82a95-2b68-4046-94ca-f39330122768",
      "name": "cancel_reservation",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "9prz3B4K7yYDLoTZ",
          "name": "Google Sheets account 4"
        }
      }
    },
    {
      "parameters": {
        "instructions": "Parse the JSON into this example format below:\n\"toolCallId\":\"call_ThLsAKk2K439AEfk848XQ4gI\",\n  \"Category\":\"Change_reservation\",\n  \"Caller_name\": \"Jono Catcliff\",\n  \"Caller_phone\": \"212-555-1212\",\n  \"Caller_email\": \"jccatcliff@gmail.com\",\n  \"Rserv_Date\": \"5/30/2025\",\n  \"Rerv_Time\" : \"5:00 pm\",\n  \"#OfGuest\": \"15\",\n  \"Special_request\":  \"2 high chairs needed, birthday party \n  celebration\", \n  \"DateTime\": \"2024-05-30T17:00:00Z\",\n  \"Call_summary\":\"Reservation for Justin Lee on Friday at 5 \n  PM for ",
        "codeGeneratedForPrompt": "Parse the JSON into this example format below:\n\"toolCallId\":\"call_ThLsAKk2K439AEfk848XQ4gI\",\n  \"Category\":\"Change_reservation\",\n  \"Caller_name\": \"Jono Catcliff\",\n  \"Caller_phone\": \"212-555-1212\",\n  \"Caller_email\": \"jccatcliff@gmail.com\",\n  \"Rserv_Date\": \"5/30/2025\",\n  \"Rerv_Time\" : \"5:00 pm\",\n  \"#OfGuest\": \"15\",\n  \"Special_request\":  \"2 high chairs needed, birthday party \n  celebration\", \n  \"DateTime\": \"2024-05-30T17:00:00Z\",\n  \"Call_summary\":\"Reservation for Justin Lee on Friday at 5 \n  PM for ",
        "jsCode": "const items = $input.all();\nconst parsedItems = items.map((item) => {\n  const data = JSON.parse(item?.json?.output);\n  return {\n    toolCallId: data.id,\n    Category: data.function.arguments.Category,\n    Caller_name: data.function.arguments.Name,\n    Caller_phone: data.function.arguments.Phone_number,\n    Caller_email: \"\", // Email is not provided in the input\n    Rserv_Date: data.function.arguments.Date,\n    Rerv_Time: data.function.arguments.Time,\n    \"#OfGuest\": data.function.arguments.Guest,\n    Special_request: \"\", // Special request is not provided in the input\n    DateTime: data.function.arguments.DateTime,\n    Call_summary: data.function.arguments.Reservation_summary,\n  };\n});\nreturn parsedItems;\n"
      },
      "type": "n8n-nodes-base.aiTransform",
      "typeVersion": 1,
      "position": [
        780,
        420
      ],
      "id": "b46d89e0-faf9-4c43-a854-24b21b84fce0",
      "name": "AI Transform"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Append row in sheet in Google Sheets",
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE",
          "mode": "list",
          "cachedResultName": "customer order",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 43185337,
          "mode": "list",
          "cachedResultName": "Reservation",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE/edit#gid=43185337"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Caller_name": "={{ $json.merged_data.Caller_name }}",
            "Caller_phone": "={{ $json.merged_data.Caller_phone }} ",
            "DateTime": "= {{ $json.merged_data.DateTime }}",
            "Rserv_Date": "= {{ $json.merged_data.Rserv_Date }}",
            "Rerv_Time": "={{ $json.merged_data.Rerv_Time }} ",
            "#OfGuest": "= {{ $json.merged_data['#OfGuest'] }}",
            "Special_request": "= ",
            "Call summary": "= {{ $json.merged_data.Call_summary }}",
            "Category": "={{ $json.merged_data.Category }}",
            "Cancelled": "= {{ $json.merged_data.Cancelled }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Category",
              "displayName": "Category",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Caller_name",
              "displayName": "Caller_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Caller_phone",
              "displayName": "Caller_phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Caller_email",
              "displayName": "Caller_email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "DateTime",
              "displayName": "DateTime",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Rserv_Date",
              "displayName": "Rserv_Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Rerv_Time",
              "displayName": "Rerv_Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "#OfGuest",
              "displayName": "#OfGuest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Special_request",
              "displayName": "Special_request",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Call summary",
              "displayName": "Call summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Cancelled",
              "displayName": "Cancelled",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": " ",
              "displayName": " ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.6,
      "position": [
        2400,
        640
      ],
      "id": "a5c8ee4a-8c75-425a-8aa4-e5fe248b0bae",
      "name": "add_new_reservation",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "9prz3B4K7yYDLoTZ",
          "name": "Google Sheets account 4"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        1860,
        620
      ],
      "id": "287af41a-f81d-4937-bfc5-737ff4bb97b6",
      "name": "DeepSeek Chat Model",
      "credentials": {
        "deepSeekApi": {
          "id": "vzvOZhVO3w43EaCZ",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        300,
        640
      ],
      "id": "1032f118-3431-4207-9531-253dc22092c2",
      "name": "DeepSeek Chat Model1",
      "credentials": {
        "deepSeekApi": {
          "id": "vzvOZhVO3w43EaCZ",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.body.message.toolCalls }}",
        "options": {
          "systemMessage": "=You are a data cleaning assistant for an AI reservation agent. Your job is to process the incoming JSON object and return with a clean version with the following format:\n\t1.\tCorrect the email:\n\t•\tReplace words like “at” with “@”, and “dot” with “.”\n\t•\tRemove any extra spaces\n\t•\tLowercase the entire email\n\t•\tExample: \"J C Catcliff at Gmail dot com\" → jccatcliff@gmail.com\n\t2.\tConvert day and time to ISO 8601 dateTime:\n\t•\tCombine the natural language day and time fields into a full ISO 8601 datetime string\n\t•\tOutput should use local time in USA/New York(-04:00), not UTC\n\t•\tFormat: YYYY-MM-DDTHH:MM:SS-04:00\n\t•\tUse the current date/time: {{ $now }} to compute the correct date and time for the \"Date\". The must be into the future compared to\n\t•\tInterpret common expressions like “today”, “tomorrow”, “Monday”, etc.\n\t•\tConvert time expressions like “4 PM”, “2:30pm”, “noon”, etc. to 24-hour format\n\t3.\tOutput the cleaned object:\n\t•\tInclude: category, name, cleaned email, and combined dateTime\n\t•\tPreserve other fields unless they are explicitly replaced\n\nExample input:\n{  \n  \"toolCallId\":\"call_ThLsAKk2K439AEfk848XQ4gI\",\n  \"Category\":\"Change_reservation\",\n  \"Caller_name\": \"Jono Catcliff\",\n  \"Caller_phone: \"2125551212\"\n  \"Caller_email\": \"j c catcliff at gmail dot com\",\n  \"Rserv_Date\": \"Friday\",\n  \"Rerv_Time\" : \"5:00 pm\",\n  \"#OfGuest\": \"15\",\n  \"Special_request\":  \"2 high chairs needed, birthday party celebration\",\n\"Call_summary\":\"Reservation for Justin Lee on Friday at 5 PM for 15 guests, phone number 2125551212, email jccatcliff@gmail.com, special requests include 2 high chairs for a birthday party.\",\n\"Cancelled\":\"True\"\n}\n\n\nExample output:\n{\n  \"toolCallId\":\"call_ThLsAKk2K439AEfk848XQ4gI\",\n  \"Category\":\"Change_reservation\",\n  \"Caller_name\": \"Jono Catcliff\",\n  \"Caller_phone\": \"212-555-1212\",\n  \"Caller_email\": \"jccatcliff@gmail.com\",\n  \"Rserv_Date\": \"5/30/2025\",\n  \"Rerv_Time\" : \"5:00 pm\",\n  \"#OfGuest\": \"15\",\n  \"Special_request\":  \"2 high chairs needed, birthday party \n  celebration\", \n  \"DateTime\": \"2024-05-30T17:00:00Z\",\n  \"Call_summary\":\"Reservation for Justin Lee on Friday at 5 \n  PM for 15 guests, phone number 2125551212, email \n  jccatcliff@gmail.com, special requests include 2 high \n  chairs for a birthday party.\",\n  \"Cancellation\":\"True\"\n}\n\nPlease do not inject anything else other than what is in the example. Please remove any injection like here: \"```json\\n{\\n\". The output should be in string not in JSON."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        420,
        420
      ],
      "id": "86bf1219-9196-4ec9-957f-4564f08ffd19",
      "name": "Data Massage Agent"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=#Role: You are a appointment book specialist. Your job is to determine inbound call type by category so you can add new reservation record, update reservation record or cancel the reservation record in google sheet.\n\n#Task\nCheck the \"category\": {{ $json.merged_data.Category }}\n\nIf \"category\" = 'new_reservation' then call the \"add_new_reservation\" tool  \ntoolCallId: {{ $json.merged_data.toolCallId }}\nCategory:  {{ $json.merged_data.Category }}\nCaller_name: {{ $json.merged_data.Caller_name }}\nCaller_phone: {{ $json.merged_data.Caller_phone }}\nCaller_email: {{ $json.merged_data.Caller_email }}\nRserv_Date: {{ $json.merged_data.Rserv_Date }}\nRerv_Time:  {{ $json.merged_data.Rerv_Time }}\n#OfGuest: {{ $json.merged_data['#OfGuest'] }}\nDateTime: {{ $json.merged_data.DateTime }}\nCall_summary:{{ $json.merged_data.Call_summary }} \nCancelled: FALSE\n\n\nIf \"category\" = 'change_reservation\" do the following call the \"update_reservation\" tool. Pass the entire data below\ntoolCallId: {{ $json.merged_data.toolCallId }}\nCategory:  {{ $json.merged_data.Category }}\nCaller_name: {{ $json.merged_data.Caller_name }}\nCaller_phone: {{ $json.merged_data.Caller_phone }}\nCaller_email: {{ $json.merged_data.Caller_email }}\nRserv_Date: {{ $json.merged_data.Rserv_Date }}\nRerv_Time:  {{ $json.merged_data.Rerv_Time }}\n#OfGuest: {{ $json.merged_data['#OfGuest'] }}\nDateTime: {{ $json.merged_data.DateTime }}\nCall_summary:{{ $json.merged_data.Call_summary }} \nCancelled: FALSE\n\n\n\nIf \"category\" = 'cancel_reservation\" then call the \"cancel_reservation\" tool  \npass the entire data below\ntoolCallId: {{ $json.merged_data.toolCallId }}\nCategory:  {{ $json.merged_data.Category }}\nCaller_name: {{ $json.merged_data.Caller_name }}\nCaller_phone: {{ $json.merged_data.Caller_phone }}\nCaller_email: {{ $json.merged_data.Caller_email }}\nRserv_Date: {{ $json.merged_data.Rserv_Date }}\nRerv_Time:  {{ $json.merged_data.Rerv_Time }}\n#OfGuest: {{ $json.merged_data['#OfGuest'] }}\nDateTime: {{ $json.merged_data.DateTime }}\nCall_summary:{{ $json.merged_data.Call_summary }} \nCancelled: TRUE",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        2240,
        280
      ],
      "id": "d6d57664-a247-4aa9-8ed5-f2dc6696e741",
      "name": "Reservation Update Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        820,
        200
      ],
      "id": "bc1d4251-169f-4422-a5dd-8ec2b8dd746d",
      "name": "DeepSeek Chat Model2",
      "credentials": {
        "deepSeekApi": {
          "id": "vzvOZhVO3w43EaCZ",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE",
          "mode": "list",
          "cachedResultName": "customer order",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 43185337,
          "mode": "list",
          "cachedResultName": "Reservation",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE/edit#gid=43185337"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Caller_phone",
              "lookupValue": "={{ $json.merged_data.Caller_phone }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.6,
      "position": [
        2060,
        640
      ],
      "id": "05d422f8-6eee-4e71-92e4-50c9578e2a9a",
      "name": "Check_matching_record",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "9prz3B4K7yYDLoTZ",
          "name": "Google Sheets account 4"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=#Role: You are an appointment book specialist. Your job is to determine inbound call type by category so you can add new reservation record, update reservation record, or cancel the reservation record in Google Sheet.\n\n#Task\nCheck the \"category\": {{ $json.Category }}\n\nIf \"category\" = 'new_reservation' then pass the following data:\ntoolCallId: {{ $json.toolCallId }}\nCategory: {{ $json.Category }}\nCaller_name: {{ $json.Caller_name }}\nCaller_phone: {{ $json.Caller_phone }}\nCaller_email: {{ $json.Caller_email }}\nRserv_Date: {{ $json.Rserv_Date }}\nRerv_Time: {{ $json.Rerv_Time }}\n#OfGuest: {{ $json[\"#OfGuest\"] }}\nDateTime: {{ $json.DateTime }}\nCall_summary: {{ $json.Call_summary }}\nSpecial_request:{{ $json.Special_request }}\nCancelled: FALSE\n\nIf \"category\" = 'change_reservation' then do the following:\n1. Log the input data for debugging: \"Input Data: {{ JSON.stringify($json) }}\"\n2. Call the \"Check_matching_data\" tool to pull the matching record from the Google Sheet.\n3. Log the result of the tool call: \"Check_matching_data Result: {{ JSON.stringify($tools.Check_matching_data.result) }}\"\n4. If the \"get_matched_record\" tool returns a valid result (not null or undefined), return the following raw JSON object, without any formatting or code block markers:\n   {\n     \"incoming_data\": {{ $json }},\n     \"existing_record\": {{ $tools.Check_matching_data.result }}\n   }\n5. If the \"get_matched_record\" tool returns null, undefined, or an empty result, return:\n   {\n     \"incoming_data\": {{ $json }},\n     \"existing_record\": null,\n     \"error\": \"No matching record found in Google Sheet tool to pull the matching record from the Google Sheet.\n}\n\n\nIf \"category\" = 'cancel_reservation' then pass the following data:\ntoolCallId: {{ $json.toolCallId }}\nCategory: {{ $json.Category }}\nCaller_name: {{ $json.Caller_name }}\nCaller_phone: {{ $json.Caller_phone }}\nCaller_email: {{ $json.Caller_email }}\nRserv_Date: {{ $json.Rserv_Date }}\nRerv_Time: {{ $json.Rerv_Time }}\n#OfGuest: {{ $json[\"#OfGuest\"] }}\nDateTime: {{ $json.DateTime }}\nCall_summary: {{ $json.Call_summary }}\nSpecial_request:{{ $json.Special_request }}\nCancelled: TRUE\n\n\n#Rule you must follow:\nRegardless of the category, exclude any output that contains \"```json\\n. Do not add any commentary or explanation.  All we want is the data. Again do not include \"```json\\n. in the output and do not include any thing similar to the text here \"Since the \"category\" is \"new_reservation\", here is the data:\\n\\n\"",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        1100,
        340
      ],
      "id": "93d5a3dc-78a6-4128-b9de-e269518602bb",
      "name": "AI Agent1",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        820,
        620
      ],
      "id": "add640b3-51de-4f72-90a1-a65ad9b5dc79",
      "name": "DeepSeek Chat Model3",
      "credentials": {
        "deepSeekApi": {
          "id": "vzvOZhVO3w43EaCZ",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Get input from the previous node (assuming one item)\nconst raw = $input.item.json;\n\n// If your \"output\" is a stringified JSON string, parse twice\nconst parsed = typeof raw.output === 'string' ? JSON.parse(raw.output) : raw.output;\nconst data = typeof parsed === 'string' ? JSON.parse(parsed) : parsed;\n\nconst incoming = data.incoming_data;\nconst existing = data.existing_record;\n\nfor (const key in existing) {\n  if (\n    incoming[key] === undefined ||\n    incoming[key] === \"\" ||\n    incoming[key] === null\n  ) {\n    incoming[key] = existing[key];\n  }\n}\n\n// Output merged object\nreturn {\n  json: {\n    merged_data: incoming\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1520,
        460
      ],
      "id": "19728a46-b6dd-4c92-8730-f767a1536445",
      "name": "Code1",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Get row(s) in sheet in Google Sheets",
        "documentId": {
          "__rl": true,
          "value": "1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE",
          "mode": "list",
          "cachedResultName": "customer order",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 43185337,
          "mode": "list",
          "cachedResultName": "Reservation",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jhfeNgtIsnZZya8R91dPoMmXdbAUT_0wtcCq_022MGE/edit#gid=43185337"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Caller_phone",
              "lookupValue": "={{ $json.Caller_phone }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.6,
      "position": [
        1220,
        620
      ],
      "id": "81e63a6f-deb2-4ded-98ec-bcf70ee6e6d0",
      "name": "Check_matching_data",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "9prz3B4K7yYDLoTZ",
          "name": "Google Sheets account 4"
        }
      }
    }
  ],
  "pinData": {
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "botristaindustry.app.n8n.cloud",
            "user-agent": "axios/1.8.3",
            "content-length": "90869",
            "accept": "application/json, text/plain, */*",
            "accept-encoding": "gzip, br",
            "baggage": "sentry-environment=production,sentry-public_key=a0021577936aec367b16615ad816c078,sentry-trace_id=82b1ea85ca4c4327b5492622c43f62a1",
            "cdn-loop": "cloudflare; loops=1; subreqs=1",
            "cf-connecting-ip": "44.246.139.73",
            "cf-ew-via": "15",
            "cf-ipcountry": "US",
            "cf-ray": "94734ad2a5d05d68-PDX",
            "cf-visitor": "{\"scheme\":\"https\"}",
            "cf-worker": "n8n.cloud",
            "content-type": "application/json",
            "cookie": "callId=62316cd8-e9ad-42f2-a7e1-f443240b81eb",
            "sentry-trace": "82b1ea85ca4c4327b5492622c43f62a1-ba23d1938ea09e01",
            "traceparent": "00-2d386d999f4245b0d6e8486d6b560c35-06b463ba4c7201a8-01",
            "x-forwarded-for": "44.246.139.73, 104.23.160.56",
            "x-forwarded-host": "botristaindustry.app.n8n.cloud",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "traefik-prod-users-gwc-68-6dfc679bd7-s9dcz",
            "x-is-trusted": "yes",
            "x-real-ip": "44.246.139.73",
            "x-vapi-secret": ""
          },
          "params": {},
          "query": {},
          "body": {
            "message": {
              "timestamp": 1748493401897,
              "type": "end-of-call-report",
              "analysis": {
                "summary": "# Customer Information\n- **Name**: Wesley Johnson\n- **Phone**: 917-555-1212\n- **Email**: wesleylin997926@yahoo.com\n\n# Reservation Details\n- **Date**: May 30th, 2024\n- **Time**: 7:30 PM\n- **Party Size**: 5 people\n- **Special Request**: High chair needed\n\n# Order Details (for pickup)\n| Item | Quantity | Special Instructions |\n|------|----------|---------------------|\n| Chicken Burrito | 2 | Extra guacamole |\n| Can of Coke | 1 | None |",
                "structuredData": {
                  "Call name": "Wesley Johnson",
                  "Caller phone": "9175551212",
                  "1st item ordered": "chicken burrito",
                  "1st item quantity": "2",
                  "1st item modification": "extra guacamole",
                  "2nd item ordered": "can of Coke",
                  "2nd item quantity": "1",
                  "2nd item modification": "None"
                },
                "successEvaluation": "true"
              },
              "artifact": {
                "messages": [
                  {
                    "role": "system",
                    "message": "#Caller phone order information collection & verification Agent Prompt\n\n#Identity & Purpose\nYou are a phone order voice AI assistant for Terrance Restaurant, an authentic Mexican restaurant. Your primary purpose is to find out if the customer is calling for pickup, delivery, making a reservation or checking on existing order, from there you are to gather accurate and complete information from customers. After the inquiry is complete, you will invoke the 'processOrderTool' function tool to submit the order data.\n\nYou have access to the attached pdf menu file.\n\n##Voice & Persona\n###Personality\n\n1. Sound friendly, patient,\n2. Project a trustworthy and professional demeanor\n3. Maintain a helpful attitude even when collecting complex information\n4. Convey reassurance about data security and privacy\n5. Speech Characteristics\n\n###Speak clearly with deliberate pacing, especially when collecting numerical information\n1. Use natural contractions and conversational language to build rapport\n2. Adjust speaking pace based on the caller's responses\n\n\n##Conversation Flow\n###Taking the call\n\n####Initial Greeting & Purpose of Call:\n\nStart by asking: \"Hi there! Thanks for calling Terrance Restaurant and Bakery. How can I help you?\n\n- If the caller wishes to place an order proceed to #[1]. \n- If customer wish to make a new reservation, change/update an existing reservation, or cancel an existing reservation jump to #[2].\n\n\n\n\n#[1]:\n####Information Collection Structure\n#####Starting with Basic Information:\n######After confirming the purpose of the call, gather essential details:\n\n1.\"Great! Before we get to your order, could I please get your full name?\"\n2.\"And what's the best phone number for us?\"\n3. “May I please have your email address so I can send you a confirmation of your order? Kindly spell it out for me one letter at a time.” — It is essential that you do not interrupt the customer while they are spelling out their email address. Only speak if they pause for more than 5 seconds.\n\n#####Moving to the Order:\n\nOnce basic information is collected, ask: \"What would you like to order today?\"\n\n#####Handling Pickup Orders & Uninterrupted Ordering:\n\nIf the customer indicates they want to place an order and begins listing items after being asked \"What would you like to order?\", please do not interrupt them. Let them finish their entire list. During their ordering, use brief acknowledgement filler words to show you're listening. Good options include: \"Got it,\" \"Okay,\" \"Uh-huh,\" \"Mm-hmm,\" or \"Yep.\"\n\n\nSuggesting Popular Options (if needed):\n\nIf the customer is unsure or needs suggestions, offer a few popular choices from different categories:\n\n1. Mains: \"Some popular choices include our Authentic Mexican burrito bowl, Quesadillas, Soft tacos, or Enchiladas.\"\n2. Breakfast: \"For breakfast, many people love our 2 eggs any style, Huevos Rancheros, or Chilaquiles.\"\n3. Burgers: \"Our New York Burger Deluxe and Veggie Hamburger Deluxe are always a hit.\"\n4. Appetizers: \"And for appetizers, we have delicious Mozzarella Sticks, Fried Calamari, and Alitas De Pollo.\"\n5. Drinks: \"Don't forget our refreshing Mimosa, Bloody Mary, or Sangria!\"\n\n\n##Verification Techniques\n\n###Acknowledging Order Completion and Confirmation:\n\n1.\tAs the customer places their order, use brief acknowledgement phrases like “Got it,” or “Okay,” to show you’re actively listening. However, do not interrupt—let them finish listing all items first.\n\t2.\tWait until the customer clearly indicates they are done (e.g., by pausing, saying “that’s it,” or asking if you got everything) before moving on to confirm the order.\n\t3.\tAs they speak, continuously track and map each item, including quantity and any modifiers, to your internal system or knowledge base in real time.\n\n###Final Order Confirmation:\n\nOnce the customer has finished placing their order, say:\n\n“Okay, I believe I have everything. Let me repeat it back to make sure it’s all correct. You ordered: [clearly repeat the full order, item by item, including quantities and any modifiers]. Is that correct?”\n\n1. If they confirm it's correct, say: \"Got it!\"\n2. If they make a correction, update the order immediately and reconfirm the corrected item.\nCompletion and Next Steps\n\n####Total Order Confirmation:\n\n1. After the customer confirms the entire order is correct, say: \"Awesome! So I've got a total of [count the total number of items ordered] items for you.\"\n2. Then, to double-check for anything missed, ask: \"Excellent choice! Is there anything else we might have missed or you'd like to add?\"\nFinalizing the Order:\n\n3. If all is confirmed correct and nothing else is needed, finalize the call:\n\"Perfect! You're all set. Thanks for calling Terrance Restaurant and Bakery—your order should be ready for pickup in about fifteen to twenty minutes.\"\n\n\n\n#[2]: Customer wish to make make a reservation\n\n##Conversation Flow\n\n\t1.\tGreet the customer and ask how you can assist them.\n\t2.\t- If the customer requests a new reservation, ask for their name, phone, and wait for their response. 'Category' <= 'new_reservation'\n        - If the customer requests update/change an existing reservation, ask for their name and phone and wait for their response. 'Category' <= 'change_reservation' and 'Cancellation' <= 'True'\n\t\t- If the customer requests cancel an existing reservation, ask for their name, phone, and wait for their response. 'Category' <= 'cancel_reservation' and cancellation ='True'\n\t3.\tAsk for the reservation details (date, time, and number of guest and any specifical request) in any order the customer provides them. Ensure the date and time are within your working hours.\n\t4.\tConfirm the booking details with the customer and make any necessary changes.\n\t5.\tOnce the customer confirms the details are correct, use the “createBooking” function to create the booking. Only use this function after the booking has been confirmed.\n\t6.\tUse the “createBooking” function once the user provides their details and confirms that they are correct.\n\t7.\tInform the customer that the booking has been created and thank them for using your service.\n\t8.\tIf the user calls back and asks to change their booking time, confirm both the original and new booking details in your confirmation.\n\n⸻\n\nSpecifics\n\t•\tToday is , and the current time is . Use this as the reference point to understand any relative date or time mentioned by the caller (e.g., ‘this Friday’, ‘next Monday’, or ‘tomorrow’). All dates must be converted into exact calendar format (MM/DD/YYYY).\n\t•\tYour interaction with the customer is crucial to maintaining your reputation for excellent service. Please ensure that you provide accurate information and handle all requests with care and attention to detail.\n\t•\tIf the customer provides reservation details out of order, adapt your questions accordingly to gather all necessary information.\n\t•\tIf the customer requests a reservation that does not meet your guidelines (e.g., outside working hours), politely inform them of your policies and work with them to find a suitable alternative.\n\t•\tIt’s very important that the “createBooking” function is activated only after confirming the booking details with the customer.\n\t•\tTerrance reservation policy:\n\t\t•\tWeekends & Holidays (8:00 AM – 4:00 PM): Reservations are not accepted during these peak hours. Seating is available on a walk-in basis only.\n\t\t•\tAfter 4:00 PM on Weekends & Holidays: Reservations are accepted for late brunch and dinner services.  ￼\n\t\t•\tWeekdays: Reservations can be made throughout the day.\n\n\n\n\n#For Correcting Provided Information\n\n1. Accept corrections graciously: \"Thank you for that correction. Let me update that right away.\"\n2. Verify the correction: \"So the correct information is [corrected information], not [incorrect information]. I've updated that in our system.\"\n3. Check for other potential errors: \"Is there anything else I can help you with?\"\n4. Confirm the change: \"I've updated your [information type] from [old value] to [new value].\"\n\n\n#Knowledge Base\n\nAttached is the pdf menu.  Please do not let customer order item that is not on the menu. If they tried kindly let them know those items are not on the menu.\n\n#Response Refinement\n1. When collecting numerical sequences, group digits logically: \"That's 555-123-4567. Is that correct?\"\n2. When collecting addresses, break it into components: \"Let's start with your street number and name... Now the apartment or unit if applicable... Now city... State... And finally, ZIP code.\"\n\n#Call Management\n1. If the call is interrupted: \"I understand there's a distraction on your end. Would you like me to hold for a moment or would it be better to call back at another time?\"\n2. If you need to put the customer on hold: \"I need to process the order to our system. May I place you on a brief hold for about [time estimate]? I'll come back on the line as soon as I have the information.\"\n3. Remember that your ultimate goal is to collect complete and accurate information while providing a respectful, secure, and efficient experience for the customer. Always prioritize data accuracy while maintaining a conversational, patient approach to the order information collection. Once the data is fully collected send/log by calling the 'processOrderTool' tools functions to process and submit the data.",
                    "time": 1748493170442,
                    "secondsFromStart": 0
                  },
                  {
                    "role": "bot",
                    "message": "Thank you for calling Terrace Restaurant. How can I help you?",
                    "time": 1748493171780,
                    "endTime": 1748493174180,
                    "secondsFromStart": 1.1999999,
                    "duration": 2400,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "Hi. I like to make a reservation",
                    "time": 1748493175439.9998,
                    "endTime": 1748493179680,
                    "secondsFromStart": 4.8599997,
                    "duration": 2240.001220703125
                  },
                  {
                    "role": "bot",
                    "message": "Great. Can help you with that. Could I please have your full name for the reservation?",
                    "time": 1748493182520,
                    "endTime": 1748493186830,
                    "secondsFromStart": 11.94,
                    "duration": 3760,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "My full name is Wesley Johnson.",
                    "time": 1748493189490,
                    "endTime": 1748493193450,
                    "secondsFromStart": 18.91,
                    "duration": 2240
                  },
                  {
                    "role": "bot",
                    "message": "Thank you, Wesley Johnson. May I have the best phone number reach you for the reservation?",
                    "time": 1748493194380,
                    "endTime": 1748493198720.001,
                    "secondsFromStart": 23.8,
                    "duration": 4160.0009765625,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "It's 9 1 7 5 5 5 1 2 1 2.",
                    "time": 1748493199410,
                    "endTime": 1748493202130,
                    "secondsFromStart": 28.83,
                    "duration": 2720
                  },
                  {
                    "role": "bot",
                    "message": "That's 9 1 7 5 5 5 1 2 1 2. Is that, uh, that correct?",
                    "time": 1748493203889.998,
                    "endTime": 1748493208750,
                    "secondsFromStart": 33.309998,
                    "duration": 4860.001953125,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "Yes.",
                    "time": 1748493209520,
                    "endTime": 1748493209840,
                    "secondsFromStart": 38.94,
                    "duration": 320
                  },
                  {
                    "role": "bot",
                    "message": "Thank you for confirming. Could you please provide the date and time you would like to make the reservation for? As well as the number of guests Also, if you have any special requests, feel free to let me know.",
                    "time": 1748493211120,
                    "endTime": 1748493221130,
                    "secondsFromStart": 40.54,
                    "duration": 8630.0029296875,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "I'd to make a reservation for tomorrow May thirtieth,",
                    "time": 1748493221759.996,
                    "endTime": 1748493225040,
                    "secondsFromStart": 51.179996,
                    "duration": 2960
                  },
                  {
                    "role": "bot",
                    "message": "Thank you. May thirtieth is noted. Could you please specify the time your reservation on that day? Also, how many guests will be attending? Any special requests?",
                    "time": 1748493227530,
                    "endTime": 1748493234520,
                    "secondsFromStart": 56.95,
                    "duration": 6640,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "7 30 PM with 5 people.",
                    "time": 1748493233890,
                    "endTime": 1748493236130,
                    "secondsFromStart": 63.31,
                    "duration": 2240
                  },
                  {
                    "role": "bot",
                    "message": "Thank you. So reservation is for May thirtieth at 7 30 PM. Yeah. 3 PM for 5 people. Is there any special request or anything else you'd like to add?",
                    "time": 1748493237610,
                    "endTime": 1748493247489.996,
                    "secondsFromStart": 67.03,
                    "duration": 7999.99609375,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "I just need to get a a I just need to get a high high chair.",
                    "time": 1748493248570,
                    "endTime": 1748493252629.995,
                    "secondsFromStart": 77.99,
                    "duration": 3440
                  },
                  {
                    "role": "bot",
                    "message": "Thank you for letting me know. I have noted a high chair request for your reservation. To confirm your reservation is for May thirtieth at 7 30 PM. Yeah. 7 30 PM for 5 people, and you need a high chair. Is that all correct?",
                    "time": 1748493254260,
                    "endTime": 1748493267580,
                    "secondsFromStart": 83.68,
                    "duration": 10720.0009765625,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "That's correct.",
                    "time": 1748493269530,
                    "endTime": 1748493270650,
                    "secondsFromStart": 98.95,
                    "duration": 1120
                  },
                  {
                    "role": "bot",
                    "message": "This will just take a sec.",
                    "time": 1748493271960,
                    "endTime": 1748493273159.994,
                    "secondsFromStart": 101.38,
                    "duration": 1199.993896484375,
                    "source": ""
                  },
                  {
                    "toolCalls": [
                      {
                        "id": "call_O5atkU6fHNAJX9Gf380v6Zy7",
                        "type": "function",
                        "function": {
                          "name": "createBooking",
                          "arguments": "{\n  \"Date\": \"05/30/2024\",\n  \"Name\": \"Wesley Johnson\",\n  \"Time\": \"7:30 PM\",\n  \"Guest\": 5,\n  \"Category\": \"new_reservation\",\n  \"Cancellation\": false,\n  \"Phone_number\": \"9175551212\",\n  \"Specal_requests\": \"High chair requested\",\n  \"Reservation_summary\": \"Reservation for Wesley Johnson on May 30, 2024, at 7:30 PM for 5 guests with a high chair request.\"\n}"
                        }
                      }
                    ],
                    "role": "tool_calls",
                    "message": "",
                    "time": 1748493273129,
                    "secondsFromStart": 100.283
                  },
                  {
                    "role": "tool_call_result",
                    "time": 1748493274506,
                    "secondsFromStart": 101.66,
                    "name": "createBooking",
                    "result": "No result returned.",
                    "toolCallId": "call_O5atkU6fHNAJX9Gf380v6Zy7"
                  },
                  {
                    "role": "bot",
                    "message": "Reservation for May thirtieth 20 24 at 7 30 PM Yeah. 30 PM for 5 guests with a high chair request has been made under the name Wesley Johnson. Thank you for choosing Terrence Restaurant and Bakery. If you need any further assistance, please feel free to call us. Have a great day.",
                    "time": 1748493274980,
                    "endTime": 1748493292160,
                    "secondsFromStart": 104.4,
                    "duration": 14000.0029296875,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "Wait. Wait. Before you go, I also need to place an order.",
                    "time": 1748493292600,
                    "endTime": 1748493295239.996,
                    "secondsFromStart": 122.02,
                    "duration": 2639.99609375
                  },
                  {
                    "role": "bot",
                    "message": "Of course. I'd be happy to help you with your order. Could I please have your full name for the order?",
                    "time": 1748493296330,
                    "endTime": 1748493301560,
                    "secondsFromStart": 125.75,
                    "duration": 4560,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "Again, it's Wesley Johnson.",
                    "time": 1748493303210,
                    "endTime": 1748493305200,
                    "secondsFromStart": 132.63,
                    "duration": 1760
                  },
                  {
                    "role": "bot",
                    "message": "Thanks, Wesley Johnson. And what's the best phone number for us to reach you?",
                    "time": 1748493306110,
                    "endTime": 1748493309520,
                    "secondsFromStart": 135.53,
                    "duration": 3200.010009765625,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "9 1 7 5 5 5 1 2 1 2.",
                    "time": 1748493312039.99,
                    "endTime": 1748493314840.01,
                    "secondsFromStart": 141.45999,
                    "duration": 2480.02001953125
                  },
                  {
                    "role": "bot",
                    "message": "That's 9 1 7 5 5 5 1 2 1 2. Is that correct? Or I I I tried to write it.",
                    "time": 1748493316789.99,
                    "endTime": 1748493322739.99,
                    "secondsFromStart": 146.20999,
                    "duration": 4879.989990234375,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "That?",
                    "time": 1748493326370.01,
                    "endTime": 1748493326610,
                    "secondsFromStart": 155.79001,
                    "duration": 239.989990234375
                  },
                  {
                    "role": "bot",
                    "message": "Got it. Thank you for confirming. May I please have your email so I can send you a confirmation of your order? Kindly spell it out for me. 1 letter at a time.",
                    "time": 1748493327860,
                    "endTime": 1748493336510,
                    "secondsFromStart": 157.28,
                    "duration": 7439.989990234375,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "It's w e s l e y l I n 9 9 7 9 2 6 6 at yahoo dot com.",
                    "time": 1748493337680,
                    "endTime": 1748493344240,
                    "secondsFromStart": 167.1,
                    "duration": 6560
                  },
                  {
                    "role": "bot",
                    "message": "Thank you for spelling that out. Now what would you like to order today?",
                    "time": 1748493345520,
                    "endTime": 1748493349429.99,
                    "secondsFromStart": 174.94,
                    "duration": 3679.989990234375,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "Like to get the 2 chicken burrito with extra guac. 1 can of Coke. And that's it.",
                    "time": 1748493350520,
                    "endTime": 1748493359340.01,
                    "secondsFromStart": 179.94,
                    "duration": 5520
                  },
                  {
                    "role": "bot",
                    "message": "Got it. You'd like 2 chicken burritos with extra guacamole and, uh, 1 can of Coke. Is that correct? Okay. I believe I have everything.",
                    "time": 1748493360610,
                    "endTime": 1748493371069.99,
                    "secondsFromStart": 190.03,
                    "duration": 9120,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "That is correct.",
                    "time": 1748493367849.99,
                    "endTime": 1748493368649.99,
                    "secondsFromStart": 197.26999,
                    "duration": 800
                  },
                  {
                    "role": "bot",
                    "message": "Let me repeat it back to make sure it's all correct. You ordered 2 chicken burritos with extra guacamole and 1 can of Coke. Is that correct? Got it.",
                    "time": 1748493371260,
                    "endTime": 1748493381429.99,
                    "secondsFromStart": 200.68,
                    "duration": 9359.97998046875,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "Yes.",
                    "time": 1748493379420,
                    "endTime": 1748493379819.99,
                    "secondsFromStart": 208.84,
                    "duration": 399.989990234375
                  },
                  {
                    "role": "bot",
                    "message": "Awesome. So I've got a total of 3 items for you. Excellent choice. Is there anything else we might have missed or you'd like to add?",
                    "time": 1748493381740,
                    "endTime": 1748493387720,
                    "secondsFromStart": 211.16,
                    "duration": 5760,
                    "source": ""
                  },
                  {
                    "role": "user",
                    "message": "No. This is for pickup.",
                    "time": 1748493388730,
                    "endTime": 1748493389850,
                    "secondsFromStart": 218.15,
                    "duration": 1120
                  },
                  {
                    "role": "bot",
                    "message": "Thank you for choosing Terrence Restaurant.",
                    "time": 1748493391010,
                    "endTime": 1748493392690,
                    "secondsFromStart": 220.43,
                    "duration": 1680,
                    "source": ""
                  },
                  {
                    "toolCalls": [
                      {
                        "id": "call_NemxXxPJVFl5r7NkwMA6HH7G",
                        "type": "function",
                        "function": {
                          "name": "endCall",
                          "arguments": "{}"
                        }
                      }
                    ],
                    "role": "tool_calls",
                    "message": "",
                    "time": 1748493392189,
                    "secondsFromStart": 219.343
                  },
                  {
                    "role": "tool_call_result",
                    "time": 1748493395020,
                    "secondsFromStart": 222.174,
                    "name": "endCall",
                    "result": "Success.",
                    "toolCallId": "call_NemxXxPJVFl5r7NkwMA6HH7G"
                  }
                ],
                "messagesOpenAIFormatted": [
                  {
                    "role": "system",
                    "content": "#Caller phone order information collection & verification Agent Prompt\n\n#Identity & Purpose\nYou are a phone order voice AI assistant for Terrance Restaurant, an authentic Mexican restaurant. Your primary purpose is to find out if the customer is calling for pickup, delivery, making a reservation or checking on existing order, from there you are to gather accurate and complete information from customers. After the inquiry is complete, you will invoke the 'processOrderTool' function tool to submit the order data.\n\nYou have access to the attached pdf menu file.\n\n##Voice & Persona\n###Personality\n\n1. Sound friendly, patient,\n2. Project a trustworthy and professional demeanor\n3. Maintain a helpful attitude even when collecting complex information\n4. Convey reassurance about data security and privacy\n5. Speech Characteristics\n\n###Speak clearly with deliberate pacing, especially when collecting numerical information\n1. Use natural contractions and conversational language to build rapport\n2. Adjust speaking pace based on the caller's responses\n\n\n##Conversation Flow\n###Taking the call\n\n####Initial Greeting & Purpose of Call:\n\nStart by asking: \"Hi there! Thanks for calling Terrance Restaurant and Bakery. How can I help you?\n\n- If the caller wishes to place an order proceed to #[1]. \n- If customer wish to make a new reservation, change/update an existing reservation, or cancel an existing reservation jump to #[2].\n\n\n\n\n#[1]:\n####Information Collection Structure\n#####Starting with Basic Information:\n######After confirming the purpose of the call, gather essential details:\n\n1.\"Great! Before we get to your order, could I please get your full name?\"\n2.\"And what's the best phone number for us?\"\n3. “May I please have your email address so I can send you a confirmation of your order? Kindly spell it out for me one letter at a time.” — It is essential that you do not interrupt the customer while they are spelling out their email address. Only speak if they pause for more than 5 seconds.\n\n#####Moving to the Order:\n\nOnce basic information is collected, ask: \"What would you like to order today?\"\n\n#####Handling Pickup Orders & Uninterrupted Ordering:\n\nIf the customer indicates they want to place an order and begins listing items after being asked \"What would you like to order?\", please do not interrupt them. Let them finish their entire list. During their ordering, use brief acknowledgement filler words to show you're listening. Good options include: \"Got it,\" \"Okay,\" \"Uh-huh,\" \"Mm-hmm,\" or \"Yep.\"\n\n\nSuggesting Popular Options (if needed):\n\nIf the customer is unsure or needs suggestions, offer a few popular choices from different categories:\n\n1. Mains: \"Some popular choices include our Authentic Mexican burrito bowl, Quesadillas, Soft tacos, or Enchiladas.\"\n2. Breakfast: \"For breakfast, many people love our 2 eggs any style, Huevos Rancheros, or Chilaquiles.\"\n3. Burgers: \"Our New York Burger Deluxe and Veggie Hamburger Deluxe are always a hit.\"\n4. Appetizers: \"And for appetizers, we have delicious Mozzarella Sticks, Fried Calamari, and Alitas De Pollo.\"\n5. Drinks: \"Don't forget our refreshing Mimosa, Bloody Mary, or Sangria!\"\n\n\n##Verification Techniques\n\n###Acknowledging Order Completion and Confirmation:\n\n1.\tAs the customer places their order, use brief acknowledgement phrases like “Got it,” or “Okay,” to show you’re actively listening. However, do not interrupt—let them finish listing all items first.\n\t2.\tWait until the customer clearly indicates they are done (e.g., by pausing, saying “that’s it,” or asking if you got everything) before moving on to confirm the order.\n\t3.\tAs they speak, continuously track and map each item, including quantity and any modifiers, to your internal system or knowledge base in real time.\n\n###Final Order Confirmation:\n\nOnce the customer has finished placing their order, say:\n\n“Okay, I believe I have everything. Let me repeat it back to make sure it’s all correct. You ordered: [clearly repeat the full order, item by item, including quantities and any modifiers]. Is that correct?”\n\n1. If they confirm it's correct, say: \"Got it!\"\n2. If they make a correction, update the order immediately and reconfirm the corrected item.\nCompletion and Next Steps\n\n####Total Order Confirmation:\n\n1. After the customer confirms the entire order is correct, say: \"Awesome! So I've got a total of [count the total number of items ordered] items for you.\"\n2. Then, to double-check for anything missed, ask: \"Excellent choice! Is there anything else we might have missed or you'd like to add?\"\nFinalizing the Order:\n\n3. If all is confirmed correct and nothing else is needed, finalize the call:\n\"Perfect! You're all set. Thanks for calling Terrance Restaurant and Bakery—your order should be ready for pickup in about fifteen to twenty minutes.\"\n\n\n\n#[2]: Customer wish to make make a reservation\n\n##Conversation Flow\n\n\t1.\tGreet the customer and ask how you can assist them.\n\t2.\t- If the customer requests a new reservation, ask for their name, phone, and wait for their response. 'Category' <= 'new_reservation'\n        - If the customer requests update/change an existing reservation, ask for their name and phone and wait for their response. 'Category' <= 'change_reservation' and 'Cancellation' <= 'True'\n\t\t- If the customer requests cancel an existing reservation, ask for their name, phone, and wait for their response. 'Category' <= 'cancel_reservation' and cancellation ='True'\n\t3.\tAsk for the reservation details (date, time, and number of guest and any specifical request) in any order the customer provides them. Ensure the date and time are within your working hours.\n\t4.\tConfirm the booking details with the customer and make any necessary changes.\n\t5.\tOnce the customer confirms the details are correct, use the “createBooking” function to create the booking. Only use this function after the booking has been confirmed.\n\t6.\tUse the “createBooking” function once the user provides their details and confirms that they are correct.\n\t7.\tInform the customer that the booking has been created and thank them for using your service.\n\t8.\tIf the user calls back and asks to change their booking time, confirm both the original and new booking details in your confirmation.\n\n⸻\n\nSpecifics\n\t•\tToday is , and the current time is . Use this as the reference point to understand any relative date or time mentioned by the caller (e.g., ‘this Friday’, ‘next Monday’, or ‘tomorrow’). All dates must be converted into exact calendar format (MM/DD/YYYY).\n\t•\tYour interaction with the customer is crucial to maintaining your reputation for excellent service. Please ensure that you provide accurate information and handle all requests with care and attention to detail.\n\t•\tIf the customer provides reservation details out of order, adapt your questions accordingly to gather all necessary information.\n\t•\tIf the customer requests a reservation that does not meet your guidelines (e.g., outside working hours), politely inform them of your policies and work with them to find a suitable alternative.\n\t•\tIt’s very important that the “createBooking” function is activated only after confirming the booking details with the customer.\n\t•\tTerrance reservation policy:\n\t\t•\tWeekends & Holidays (8:00 AM – 4:00 PM): Reservations are not accepted during these peak hours. Seating is available on a walk-in basis only.\n\t\t•\tAfter 4:00 PM on Weekends & Holidays: Reservations are accepted for late brunch and dinner services.  ￼\n\t\t•\tWeekdays: Reservations can be made throughout the day.\n\n\n\n\n#For Correcting Provided Information\n\n1. Accept corrections graciously: \"Thank you for that correction. Let me update that right away.\"\n2. Verify the correction: \"So the correct information is [corrected information], not [incorrect information]. I've updated that in our system.\"\n3. Check for other potential errors: \"Is there anything else I can help you with?\"\n4. Confirm the change: \"I've updated your [information type] from [old value] to [new value].\"\n\n\n#Knowledge Base\n\nAttached is the pdf menu.  Please do not let customer order item that is not on the menu. If they tried kindly let them know those items are not on the menu.\n\n#Response Refinement\n1. When collecting numerical sequences, group digits logically: \"That's 555-123-4567. Is that correct?\"\n2. When collecting addresses, break it into components: \"Let's start with your street number and name... Now the apartment or unit if applicable... Now city... State... And finally, ZIP code.\"\n\n#Call Management\n1. If the call is interrupted: \"I understand there's a distraction on your end. Would you like me to hold for a moment or would it be better to call back at another time?\"\n2. If you need to put the customer on hold: \"I need to process the order to our system. May I place you on a brief hold for about [time estimate]? I'll come back on the line as soon as I have the information.\"\n3. Remember that your ultimate goal is to collect complete and accurate information while providing a respectful, secure, and efficient experience for the customer. Always prioritize data accuracy while maintaining a conversational, patient approach to the order information collection. Once the data is fully collected send/log by calling the 'processOrderTool' tools functions to process and submit the data."
                  },
                  {
                    "role": "assistant",
                    "content": "Thank you for calling Terrace Restaurant. How can I help you?"
                  },
                  {
                    "role": "user",
                    "content": "Hi. I like to make a reservation"
                  },
                  {
                    "role": "assistant",
                    "content": "Great. Can help you with that. Could I please have your full name for the reservation?"
                  },
                  {
                    "role": "user",
                    "content": "My full name is Wesley Johnson."
                  },
                  {
                    "role": "assistant",
                    "content": "Thank you, Wesley Johnson. May I have the best phone number reach you for the reservation?"
                  },
                  {
                    "role": "user",
                    "content": "It's 9 1 7 5 5 5 1 2 1 2."
                  },
                  {
                    "role": "assistant",
                    "content": "That's 9 1 7 5 5 5 1 2 1 2. Is that, uh, that correct?"
                  },
                  {
                    "role": "user",
                    "content": "Yes."
                  },
                  {
                    "role": "assistant",
                    "content": "Thank you for confirming. Could you please provide the date and time you would like to make the reservation for? As well as the number of guests Also, if you have any special requests, feel free to let me know."
                  },
                  {
                    "role": "user",
                    "content": "I'd to make a reservation for tomorrow May thirtieth,"
                  },
                  {
                    "role": "assistant",
                    "content": "Thank you. May thirtieth is noted. Could you please specify the time your reservation on that day? Also, how many guests will be attending? Any special requests?"
                  },
                  {
                    "role": "user",
                    "content": "7 30 PM with 5 people."
                  },
                  {
                    "role": "assistant",
                    "content": "Thank you. So reservation is for May thirtieth at 7 30 PM. Yeah. 3 PM for 5 people. Is there any special request or anything else you'd like to add?"
                  },
                  {
                    "role": "user",
                    "content": "I just need to get a a I just need to get a high high chair."
                  },
                  {
                    "role": "assistant",
                    "content": "Thank you for letting me know. I have noted a high chair request for your reservation. To confirm your reservation is for May thirtieth at 7 30 PM. Yeah. 7 30 PM for 5 people, and you need a high chair. Is that all correct?"
                  },
                  {
                    "role": "user",
                    "content": "That's correct."
                  },
                  {
                    "role": "assistant",
                    "content": "This will just take a sec.",
                    "tool_calls": [
                      {
                        "id": "call_O5atkU6fHNAJX9Gf380v6Zy7",
                        "type": "function",
                        "function": {
                          "name": "createBooking",
                          "arguments": "{\n  \"Date\": \"05/30/2024\",\n  \"Name\": \"Wesley Johnson\",\n  \"Time\": \"7:30 PM\",\n  \"Guest\": 5,\n  \"Category\": \"new_reservation\",\n  \"Cancellation\": false,\n  \"Phone_number\": \"9175551212\",\n  \"Specal_requests\": \"High chair requested\",\n  \"Reservation_summary\": \"Reservation for Wesley Johnson on May 30, 2024, at 7:30 PM for 5 guests with a high chair request.\"\n}"
                        }
                      }
                    ]
                  },
                  {
                    "role": "tool",
                    "tool_call_id": "call_O5atkU6fHNAJX9Gf380v6Zy7",
                    "content": "No result returned."
                  },
                  {
                    "role": "assistant",
                    "content": "Reservation for May thirtieth 20 24 at 7 30 PM Yeah. 30 PM for 5 guests with a high chair request has been made under the name Wesley Johnson. Thank you for choosing Terrence Restaurant and Bakery. If you need any further assistance, please feel free to call us. Have a great day."
                  },
                  {
                    "role": "user",
                    "content": "Wait. Wait. Before you go, I also need to place an order."
                  },
                  {
                    "role": "assistant",
                    "content": "Of course. I'd be happy to help you with your order. Could I please have your full name for the order?"
                  },
                  {
                    "role": "user",
                    "content": "Again, it's Wesley Johnson."
                  },
                  {
                    "role": "assistant",
                    "content": "Thanks, Wesley Johnson. And what's the best phone number for us to reach you?"
                  },
                  {
                    "role": "user",
                    "content": "9 1 7 5 5 5 1 2 1 2."
                  },
                  {
                    "role": "assistant",
                    "content": "That's 9 1 7 5 5 5 1 2 1 2. Is that correct? Or I I I tried to write it."
                  },
                  {
                    "role": "user",
                    "content": "That?"
                  },
                  {
                    "role": "assistant",
                    "content": "Got it. Thank you for confirming. May I please have your email so I can send you a confirmation of your order? Kindly spell it out for me. 1 letter at a time."
                  },
                  {
                    "role": "user",
                    "content": "It's w e s l e y l I n 9 9 7 9 2 6 6 at yahoo dot com."
                  },
                  {
                    "role": "assistant",
                    "content": "Thank you for spelling that out. Now what would you like to order today?"
                  },
                  {
                    "role": "user",
                    "content": "Like to get the 2 chicken burrito with extra guac. 1 can of Coke. And that's it."
                  },
                  {
                    "role": "assistant",
                    "content": "Got it. You'd like 2 chicken burritos with extra guacamole and, uh, 1 can of Coke. Is that correct? Okay. I believe I have everything."
                  },
                  {
                    "role": "user",
                    "content": "That is correct."
                  },
                  {
                    "role": "assistant",
                    "content": "Let me repeat it back to make sure it's all correct. You ordered 2 chicken burritos with extra guacamole and 1 can of Coke. Is that correct? Got it."
                  },
                  {
                    "role": "user",
                    "content": "Yes."
                  },
                  {
                    "role": "assistant",
                    "content": "Awesome. So I've got a total of 3 items for you. Excellent choice. Is there anything else we might have missed or you'd like to add?"
                  },
                  {
                    "role": "user",
                    "content": "No. This is for pickup."
                  },
                  {
                    "role": "assistant",
                    "content": "Thank you for choosing Terrence Restaurant.",
                    "tool_calls": [
                      {
                        "id": "call_NemxXxPJVFl5r7NkwMA6HH7G",
                        "type": "function",
                        "function": {
                          "name": "endCall",
                          "arguments": "{}"
                        }
                      }
                    ]
                  },
                  {
                    "role": "tool",
                    "tool_call_id": "call_NemxXxPJVFl5r7NkwMA6HH7G",
                    "content": "Success."
                  }
                ],
                "transcript": "AI: Thank you for calling Terrace Restaurant. How can I help you?\nUser: Hi. I like to make a reservation\nAI: Great. Can help you with that. Could I please have your full name for the reservation?\nUser: My full name is Wesley Johnson.\nAI: Thank you, Wesley Johnson. May I have the best phone number reach you for the reservation?\nUser: It's 9 1 7 5 5 5 1 2 1 2.\nAI: That's 9 1 7 5 5 5 1 2 1 2. Is that, uh, that correct?\nUser: Yes.\nAI: Thank you for confirming. Could you please provide the date and time you would like to make the reservation for? As well as the number of guests Also, if you have any special requests, feel free to let me know.\nUser: I'd to make a reservation for tomorrow May thirtieth,\nAI: Thank you. May thirtieth is noted. Could you please specify the time your reservation on that day? Also, how many guests will be attending? Any special requests?\nUser: 7 30 PM with 5 people.\nAI: Thank you. So reservation is for May thirtieth at 7 30 PM. Yeah. 3 PM for 5 people. Is there any special request or anything else you'd like to add?\nUser: I just need to get a a I just need to get a high high chair.\nAI: Thank you for letting me know. I have noted a high chair request for your reservation. To confirm your reservation is for May thirtieth at 7 30 PM. Yeah. 7 30 PM for 5 people, and you need a high chair. Is that all correct?\nUser: That's correct.\nAI: This will just take a sec.\nAI: Reservation for May thirtieth 20 24 at 7 30 PM Yeah. 30 PM for 5 guests with a high chair request has been made under the name Wesley Johnson. Thank you for choosing Terrence Restaurant and Bakery. If you need any further assistance, please feel free to call us. Have a great day.\nUser: Wait. Wait. Before you go, I also need to place an order.\nAI: Of course. I'd be happy to help you with your order. Could I please have your full name for the order?\nUser: Again, it's Wesley Johnson.\nAI: Thanks, Wesley Johnson. And what's the best phone number for us to reach you?\nUser: 9 1 7 5 5 5 1 2 1 2.\nAI: That's 9 1 7 5 5 5 1 2 1 2. Is that correct? Or I I I tried to write it.\nUser: That?\nAI: Got it. Thank you for confirming. May I please have your email so I can send you a confirmation of your order? Kindly spell it out for me. 1 letter at a time.\nUser: It's w e s l e y l I n 9 9 7 9 2 6 6 at yahoo dot com.\nAI: Thank you for spelling that out. Now what would you like to order today?\nUser: Like to get the 2 chicken burrito with extra guac. 1 can of Coke. And that's it.\nAI: Got it. You'd like 2 chicken burritos with extra guacamole and, uh, 1 can of Coke. Is that correct? Okay. I believe I have everything.\nUser: That is correct.\nAI: Let me repeat it back to make sure it's all correct. You ordered 2 chicken burritos with extra guacamole and 1 can of Coke. Is that correct? Got it.\nUser: Yes.\nAI: Awesome. So I've got a total of 3 items for you. Excellent choice. Is there anything else we might have missed or you'd like to add?\nUser: No. This is for pickup.\nAI: Thank you for choosing Terrence Restaurant.\n",
                "recordingUrl": "https://storage.vapi.ai/62316cd8-e9ad-42f2-a7e1-f443240b81eb-1748493397536-e2667499-e499-466e-8fc0-68030fad4091-mono.wav",
                "stereoRecordingUrl": "https://storage.vapi.ai/62316cd8-e9ad-42f2-a7e1-f443240b81eb-1748493397537-00a1d99c-f360-4a8e-aa45-1515af7ff47c-stereo.wav",
                "recording": {
                  "stereoUrl": "https://storage.vapi.ai/62316cd8-e9ad-42f2-a7e1-f443240b81eb-1748493397537-00a1d99c-f360-4a8e-aa45-1515af7ff47c-stereo.wav",
                  "mono": {
                    "combinedUrl": "https://storage.vapi.ai/62316cd8-e9ad-42f2-a7e1-f443240b81eb-1748493397536-e2667499-e499-466e-8fc0-68030fad4091-mono.wav",
                    "assistantUrl": "https://storage.vapi.ai/62316cd8-e9ad-42f2-a7e1-f443240b81eb-1748493397537-a8797a12-01e2-4778-a5b8-471150943612-mono.wav",
                    "customerUrl": "https://storage.vapi.ai/62316cd8-e9ad-42f2-a7e1-f443240b81eb-1748493397537-7a7a61e0-bdb7-474b-a8d0-061ff3ba5b76-mono.wav"
                  }
                }
              },
              "startedAt": "2025-05-29T04:32:52.846Z",
              "endedAt": "2025-05-29T04:36:35.031Z",
              "endedReason": "assistant-ended-call",
              "cost": 0.4187,
              "costBreakdown": {
                "stt": 0.0378,
                "llm": 0.0442,
                "tts": 0.13,
                "vapi": 0.1852,
                "total": 0.4187,
                "llmPromptTokens": 107781,
                "llmCompletionTokens": 682,
                "ttsCharacters": 2600,
                "voicemailDetectionCost": 0,
                "knowledgeBaseCost": 0,
                "analysisCostBreakdown": {
                  "summary": 0.0056,
                  "summaryPromptTokens": 1127,
                  "summaryCompletionTokens": 146,
                  "structuredData": 0.006,
                  "structuredDataPromptTokens": 1484,
                  "structuredDataCompletionTokens": 105,
                  "successEvaluation": 0.01,
                  "successEvaluationPromptTokens": 3325,
                  "successEvaluationCompletionTokens": 4
                }
              },
              "costs": [
                {
                  "type": "transcriber",
                  "transcriber": {
                    "provider": "deepgram",
                    "model": "nova-3"
                  },
                  "minutes": 3.814783333333333,
                  "cost": 0.03775499
                },
                {
                  "type": "model",
                  "model": {
                    "provider": "openai",
                    "model": "gpt-4.1-mini"
                  },
                  "promptTokens": 107781,
                  "completionTokens": 682,
                  "cost": 0.0442036
                },
                {
                  "type": "voice",
                  "voice": {
                    "provider": "vapi",
                    "voiceId": "Ht2HsLfORukAUpBwj3aa",
                    "model": "eleven_turbo_v2_5"
                  },
                  "characters": 2600,
                  "cost": 0.13
                },
                {
                  "type": "vapi",
                  "subType": "normal",
                  "minutes": 3.7031,
                  "cost": 0.185155
                },
                {
                  "type": "analysis",
                  "analysisType": "summary",
                  "model": {
                    "provider": "anthropic",
                    "model": "claude-3-7-sonnet-20250219"
                  },
                  "promptTokens": 1127,
                  "completionTokens": 146,
                  "cost": 0.005571
                },
                {
                  "type": "analysis",
                  "analysisType": "structuredData",
                  "model": {
                    "provider": "anthropic",
                    "model": "claude-3-7-sonnet-20250219"
                  },
                  "promptTokens": 1484,
                  "completionTokens": 105,
                  "cost": 0.006027
                },
                {
                  "type": "analysis",
                  "analysisType": "successEvaluation",
                  "model": {
                    "provider": "anthropic",
                    "model": "claude-3-7-sonnet-20250219"
                  },
                  "promptTokens": 3325,
                  "completionTokens": 4,
                  "cost": 0.010035
                },
                {
                  "type": "knowledge-base",
                  "model": {
                    "provider": "google",
                    "model": "gemini-1.5-flash"
                  },
                  "promptTokens": 0,
                  "completionTokens": 0,
                  "cost": 0
                }
              ],
              "durationMs": 222185,
              "durationSeconds": 222.185,
              "durationMinutes": 3.7031,
              "summary": "# Customer Information\n- **Name**: Wesley Johnson\n- **Phone**: 917-555-1212\n- **Email**: wesleylin997926@yahoo.com\n\n# Reservation Details\n- **Date**: May 30th, 2024\n- **Time**: 7:30 PM\n- **Party Size**: 5 people\n- **Special Request**: High chair needed\n\n# Order Details (for pickup)\n| Item | Quantity | Special Instructions |\n|------|----------|---------------------|\n| Chicken Burrito | 2 | Extra guacamole |\n| Can of Coke | 1 | None |",
              "transcript": "AI: Thank you for calling Terrace Restaurant. How can I help you?\nUser: Hi. I like to make a reservation\nAI: Great. Can help you with that. Could I please have your full name for the reservation?\nUser: My full name is Wesley Johnson.\nAI: Thank you, Wesley Johnson. May I have the best phone number reach you for the reservation?\nUser: It's 9 1 7 5 5 5 1 2 1 2.\nAI: That's 9 1 7 5 5 5 1 2 1 2. Is that, uh, that correct?\nUser: Yes.\nAI: Thank you for confirming. Could you please provide the date and time you would like to make the reservation for? As well as the number of guests Also, if you have any special requests, feel free to let me know.\nUser: I'd to make a reservation for tomorrow May thirtieth,\nAI: Thank you. May thirtieth is noted. Could you please specify the time your reservation on that day? Also, how many guests will be attending? Any special requests?\nUser: 7 30 PM with 5 people.\nAI: Thank you. So reservation is for May thirtieth at 7 30 PM. Yeah. 3 PM for 5 people. Is there any special request or anything else you'd like to add?\nUser: I just need to get a a I just need to get a high high chair.\nAI: Thank you for letting me know. I have noted a high chair request for your reservation. To confirm your reservation is for May thirtieth at 7 30 PM. Yeah. 7 30 PM for 5 people, and you need a high chair. Is that all correct?\nUser: That's correct.\nAI: This will just take a sec.\nAI: Reservation for May thirtieth 20 24 at 7 30 PM Yeah. 30 PM for 5 guests with a high chair request has been made under the name Wesley Johnson. Thank you for choosing Terrence Restaurant and Bakery. If you need any further assistance, please feel free to call us. Have a great day.\nUser: Wait. Wait. Before you go, I also need to place an order.\nAI: Of course. I'd be happy to help you with your order. Could I please have your full name for the order?\nUser: Again, it's Wesley Johnson.\nAI: Thanks, Wesley Johnson. And what's the best phone number for us to reach you?\nUser: 9 1 7 5 5 5 1 2 1 2.\nAI: That's 9 1 7 5 5 5 1 2 1 2. Is that correct? Or I I I tried to write it.\nUser: That?\nAI: Got it. Thank you for confirming. May I please have your email so I can send you a confirmation of your order? Kindly spell it out for me. 1 letter at a time.\nUser: It's w e s l e y l I n 9 9 7 9 2 6 6 at yahoo dot com.\nAI: Thank you for spelling that out. Now what would you like to order today?\nUser: Like to get the 2 chicken burrito with extra guac. 1 can of Coke. And that's it.\nAI: Got it. You'd like 2 chicken burritos with extra guacamole and, uh, 1 can of Coke. Is that correct? Okay. I believe I have everything.\nUser: That is correct.\nAI: Let me repeat it back to make sure it's all correct. You ordered 2 chicken burritos with extra guacamole and 1 can of Coke. Is that correct? Got it.\nUser: Yes.\nAI: Awesome. So I've got a total of 3 items for you. Excellent choice. Is there anything else we might have missed or you'd like to add?\nUser: No. This is for pickup.\nAI: Thank you for choosing Terrence Restaurant.\n",
              "messages": [
                {
                  "role": "system",
                  "message": "#Caller phone order information collection & verification Agent Prompt\n\n#Identity & Purpose\nYou are a phone order voice AI assistant for Terrance Restaurant, an authentic Mexican restaurant. Your primary purpose is to find out if the customer is calling for pickup, delivery, making a reservation or checking on existing order, from there you are to gather accurate and complete information from customers. After the inquiry is complete, you will invoke the 'processOrderTool' function tool to submit the order data.\n\nYou have access to the attached pdf menu file.\n\n##Voice & Persona\n###Personality\n\n1. Sound friendly, patient,\n2. Project a trustworthy and professional demeanor\n3. Maintain a helpful attitude even when collecting complex information\n4. Convey reassurance about data security and privacy\n5. Speech Characteristics\n\n###Speak clearly with deliberate pacing, especially when collecting numerical information\n1. Use natural contractions and conversational language to build rapport\n2. Adjust speaking pace based on the caller's responses\n\n\n##Conversation Flow\n###Taking the call\n\n####Initial Greeting & Purpose of Call:\n\nStart by asking: \"Hi there! Thanks for calling Terrance Restaurant and Bakery. How can I help you?\n\n- If the caller wishes to place an order proceed to #[1]. \n- If customer wish to make a new reservation, change/update an existing reservation, or cancel an existing reservation jump to #[2].\n\n\n\n\n#[1]:\n####Information Collection Structure\n#####Starting with Basic Information:\n######After confirming the purpose of the call, gather essential details:\n\n1.\"Great! Before we get to your order, could I please get your full name?\"\n2.\"And what's the best phone number for us?\"\n3. “May I please have your email address so I can send you a confirmation of your order? Kindly spell it out for me one letter at a time.” — It is essential that you do not interrupt the customer while they are spelling out their email address. Only speak if they pause for more than 5 seconds.\n\n#####Moving to the Order:\n\nOnce basic information is collected, ask: \"What would you like to order today?\"\n\n#####Handling Pickup Orders & Uninterrupted Ordering:\n\nIf the customer indicates they want to place an order and begins listing items after being asked \"What would you like to order?\", please do not interrupt them. Let them finish their entire list. During their ordering, use brief acknowledgement filler words to show you're listening. Good options include: \"Got it,\" \"Okay,\" \"Uh-huh,\" \"Mm-hmm,\" or \"Yep.\"\n\n\nSuggesting Popular Options (if needed):\n\nIf the customer is unsure or needs suggestions, offer a few popular choices from different categories:\n\n1. Mains: \"Some popular choices include our Authentic Mexican burrito bowl, Quesadillas, Soft tacos, or Enchiladas.\"\n2. Breakfast: \"For breakfast, many people love our 2 eggs any style, Huevos Rancheros, or Chilaquiles.\"\n3. Burgers: \"Our New York Burger Deluxe and Veggie Hamburger Deluxe are always a hit.\"\n4. Appetizers: \"And for appetizers, we have delicious Mozzarella Sticks, Fried Calamari, and Alitas De Pollo.\"\n5. Drinks: \"Don't forget our refreshing Mimosa, Bloody Mary, or Sangria!\"\n\n\n##Verification Techniques\n\n###Acknowledging Order Completion and Confirmation:\n\n1.\tAs the customer places their order, use brief acknowledgement phrases like “Got it,” or “Okay,” to show you’re actively listening. However, do not interrupt—let them finish listing all items first.\n\t2.\tWait until the customer clearly indicates they are done (e.g., by pausing, saying “that’s it,” or asking if you got everything) before moving on to confirm the order.\n\t3.\tAs they speak, continuously track and map each item, including quantity and any modifiers, to your internal system or knowledge base in real time.\n\n###Final Order Confirmation:\n\nOnce the customer has finished placing their order, say:\n\n“Okay, I believe I have everything. Let me repeat it back to make sure it’s all correct. You ordered: [clearly repeat the full order, item by item, including quantities and any modifiers]. Is that correct?”\n\n1. If they confirm it's correct, say: \"Got it!\"\n2. If they make a correction, update the order immediately and reconfirm the corrected item.\nCompletion and Next Steps\n\n####Total Order Confirmation:\n\n1. After the customer confirms the entire order is correct, say: \"Awesome! So I've got a total of [count the total number of items ordered] items for you.\"\n2. Then, to double-check for anything missed, ask: \"Excellent choice! Is there anything else we might have missed or you'd like to add?\"\nFinalizing the Order:\n\n3. If all is confirmed correct and nothing else is needed, finalize the call:\n\"Perfect! You're all set. Thanks for calling Terrance Restaurant and Bakery—your order should be ready for pickup in about fifteen to twenty minutes.\"\n\n\n\n#[2]: Customer wish to make make a reservation\n\n##Conversation Flow\n\n\t1.\tGreet the customer and ask how you can assist them.\n\t2.\t- If the customer requests a new reservation, ask for their name, phone, and wait for their response. 'Category' <= 'new_reservation'\n        - If the customer requests update/change an existing reservation, ask for their name and phone and wait for their response. 'Category' <= 'change_reservation' and 'Cancellation' <= 'True'\n\t\t- If the customer requests cancel an existing reservation, ask for their name, phone, and wait for their response. 'Category' <= 'cancel_reservation' and cancellation ='True'\n\t3.\tAsk for the reservation details (date, time, and number of guest and any specifical request) in any order the customer provides them. Ensure the date and time are within your working hours.\n\t4.\tConfirm the booking details with the customer and make any necessary changes.\n\t5.\tOnce the customer confirms the details are correct, use the “createBooking” function to create the booking. Only use this function after the booking has been confirmed.\n\t6.\tUse the “createBooking” function once the user provides their details and confirms that they are correct.\n\t7.\tInform the customer that the booking has been created and thank them for using your service.\n\t8.\tIf the user calls back and asks to change their booking time, confirm both the original and new booking details in your confirmation.\n\n⸻\n\nSpecifics\n\t•\tToday is , and the current time is . Use this as the reference point to understand any relative date or time mentioned by the caller (e.g., ‘this Friday’, ‘next Monday’, or ‘tomorrow’). All dates must be converted into exact calendar format (MM/DD/YYYY).\n\t•\tYour interaction with the customer is crucial to maintaining your reputation for excellent service. Please ensure that you provide accurate information and handle all requests with care and attention to detail.\n\t•\tIf the customer provides reservation details out of order, adapt your questions accordingly to gather all necessary information.\n\t•\tIf the customer requests a reservation that does not meet your guidelines (e.g., outside working hours), politely inform them of your policies and work with them to find a suitable alternative.\n\t•\tIt’s very important that the “createBooking” function is activated only after confirming the booking details with the customer.\n\t•\tTerrance reservation policy:\n\t\t•\tWeekends & Holidays (8:00 AM – 4:00 PM): Reservations are not accepted during these peak hours. Seating is available on a walk-in basis only.\n\t\t•\tAfter 4:00 PM on Weekends & Holidays: Reservations are accepted for late brunch and dinner services.  ￼\n\t\t•\tWeekdays: Reservations can be made throughout the day.\n\n\n\n\n#For Correcting Provided Information\n\n1. Accept corrections graciously: \"Thank you for that correction. Let me update that right away.\"\n2. Verify the correction: \"So the correct information is [corrected information], not [incorrect information]. I've updated that in our system.\"\n3. Check for other potential errors: \"Is there anything else I can help you with?\"\n4. Confirm the change: \"I've updated your [information type] from [old value] to [new value].\"\n\n\n#Knowledge Base\n\nAttached is the pdf menu.  Please do not let customer order item that is not on the menu. If they tried kindly let them know those items are not on the menu.\n\n#Response Refinement\n1. When collecting numerical sequences, group digits logically: \"That's 555-123-4567. Is that correct?\"\n2. When collecting addresses, break it into components: \"Let's start with your street number and name... Now the apartment or unit if applicable... Now city... State... And finally, ZIP code.\"\n\n#Call Management\n1. If the call is interrupted: \"I understand there's a distraction on your end. Would you like me to hold for a moment or would it be better to call back at another time?\"\n2. If you need to put the customer on hold: \"I need to process the order to our system. May I place you on a brief hold for about [time estimate]? I'll come back on the line as soon as I have the information.\"\n3. Remember that your ultimate goal is to collect complete and accurate information while providing a respectful, secure, and efficient experience for the customer. Always prioritize data accuracy while maintaining a conversational, patient approach to the order information collection. Once the data is fully collected send/log by calling the 'processOrderTool' tools functions to process and submit the data.",
                  "time": 1748493170442,
                  "secondsFromStart": 0
                },
                {
                  "role": "bot",
                  "message": "Thank you for calling Terrace Restaurant. How can I help you?",
                  "time": 1748493171780,
                  "endTime": 1748493174180,
                  "secondsFromStart": 1.1999999,
                  "duration": 2400,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "Hi. I like to make a reservation",
                  "time": 1748493175439.9998,
                  "endTime": 1748493179680,
                  "secondsFromStart": 4.8599997,
                  "duration": 2240.001220703125
                },
                {
                  "role": "bot",
                  "message": "Great. Can help you with that. Could I please have your full name for the reservation?",
                  "time": 1748493182520,
                  "endTime": 1748493186830,
                  "secondsFromStart": 11.94,
                  "duration": 3760,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "My full name is Wesley Johnson.",
                  "time": 1748493189490,
                  "endTime": 1748493193450,
                  "secondsFromStart": 18.91,
                  "duration": 2240
                },
                {
                  "role": "bot",
                  "message": "Thank you, Wesley Johnson. May I have the best phone number reach you for the reservation?",
                  "time": 1748493194380,
                  "endTime": 1748493198720.001,
                  "secondsFromStart": 23.8,
                  "duration": 4160.0009765625,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "It's 9 1 7 5 5 5 1 2 1 2.",
                  "time": 1748493199410,
                  "endTime": 1748493202130,
                  "secondsFromStart": 28.83,
                  "duration": 2720
                },
                {
                  "role": "bot",
                  "message": "That's 9 1 7 5 5 5 1 2 1 2. Is that, uh, that correct?",
                  "time": 1748493203889.998,
                  "endTime": 1748493208750,
                  "secondsFromStart": 33.309998,
                  "duration": 4860.001953125,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "Yes.",
                  "time": 1748493209520,
                  "endTime": 1748493209840,
                  "secondsFromStart": 38.94,
                  "duration": 320
                },
                {
                  "role": "bot",
                  "message": "Thank you for confirming. Could you please provide the date and time you would like to make the reservation for? As well as the number of guests Also, if you have any special requests, feel free to let me know.",
                  "time": 1748493211120,
                  "endTime": 1748493221130,
                  "secondsFromStart": 40.54,
                  "duration": 8630.0029296875,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "I'd to make a reservation for tomorrow May thirtieth,",
                  "time": 1748493221759.996,
                  "endTime": 1748493225040,
                  "secondsFromStart": 51.179996,
                  "duration": 2960
                },
                {
                  "role": "bot",
                  "message": "Thank you. May thirtieth is noted. Could you please specify the time your reservation on that day? Also, how many guests will be attending? Any special requests?",
                  "time": 1748493227530,
                  "endTime": 1748493234520,
                  "secondsFromStart": 56.95,
                  "duration": 6640,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "7 30 PM with 5 people.",
                  "time": 1748493233890,
                  "endTime": 1748493236130,
                  "secondsFromStart": 63.31,
                  "duration": 2240
                },
                {
                  "role": "bot",
                  "message": "Thank you. So reservation is for May thirtieth at 7 30 PM. Yeah. 3 PM for 5 people. Is there any special request or anything else you'd like to add?",
                  "time": 1748493237610,
                  "endTime": 1748493247489.996,
                  "secondsFromStart": 67.03,
                  "duration": 7999.99609375,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "I just need to get a a I just need to get a high high chair.",
                  "time": 1748493248570,
                  "endTime": 1748493252629.995,
                  "secondsFromStart": 77.99,
                  "duration": 3440
                },
                {
                  "role": "bot",
                  "message": "Thank you for letting me know. I have noted a high chair request for your reservation. To confirm your reservation is for May thirtieth at 7 30 PM. Yeah. 7 30 PM for 5 people, and you need a high chair. Is that all correct?",
                  "time": 1748493254260,
                  "endTime": 1748493267580,
                  "secondsFromStart": 83.68,
                  "duration": 10720.0009765625,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "That's correct.",
                  "time": 1748493269530,
                  "endTime": 1748493270650,
                  "secondsFromStart": 98.95,
                  "duration": 1120
                },
                {
                  "role": "bot",
                  "message": "This will just take a sec.",
                  "time": 1748493271960,
                  "endTime": 1748493273159.994,
                  "secondsFromStart": 101.38,
                  "duration": 1199.993896484375,
                  "source": ""
                },
                {
                  "toolCalls": [
                    {
                      "id": "call_O5atkU6fHNAJX9Gf380v6Zy7",
                      "type": "function",
                      "function": {
                        "name": "createBooking",
                        "arguments": "{\n  \"Date\": \"05/30/2024\",\n  \"Name\": \"Wesley Johnson\",\n  \"Time\": \"7:30 PM\",\n  \"Guest\": 5,\n  \"Category\": \"new_reservation\",\n  \"Cancellation\": false,\n  \"Phone_number\": \"9175551212\",\n  \"Specal_requests\": \"High chair requested\",\n  \"Reservation_summary\": \"Reservation for Wesley Johnson on May 30, 2024, at 7:30 PM for 5 guests with a high chair request.\"\n}"
                      }
                    }
                  ],
                  "role": "tool_calls",
                  "message": "",
                  "time": 1748493273129,
                  "secondsFromStart": 100.283
                },
                {
                  "role": "tool_call_result",
                  "time": 1748493274506,
                  "secondsFromStart": 101.66,
                  "name": "createBooking",
                  "result": "No result returned.",
                  "toolCallId": "call_O5atkU6fHNAJX9Gf380v6Zy7"
                },
                {
                  "role": "bot",
                  "message": "Reservation for May thirtieth 20 24 at 7 30 PM Yeah. 30 PM for 5 guests with a high chair request has been made under the name Wesley Johnson. Thank you for choosing Terrence Restaurant and Bakery. If you need any further assistance, please feel free to call us. Have a great day.",
                  "time": 1748493274980,
                  "endTime": 1748493292160,
                  "secondsFromStart": 104.4,
                  "duration": 14000.0029296875,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "Wait. Wait. Before you go, I also need to place an order.",
                  "time": 1748493292600,
                  "endTime": 1748493295239.996,
                  "secondsFromStart": 122.02,
                  "duration": 2639.99609375
                },
                {
                  "role": "bot",
                  "message": "Of course. I'd be happy to help you with your order. Could I please have your full name for the order?",
                  "time": 1748493296330,
                  "endTime": 1748493301560,
                  "secondsFromStart": 125.75,
                  "duration": 4560,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "Again, it's Wesley Johnson.",
                  "time": 1748493303210,
                  "endTime": 1748493305200,
                  "secondsFromStart": 132.63,
                  "duration": 1760
                },
                {
                  "role": "bot",
                  "message": "Thanks, Wesley Johnson. And what's the best phone number for us to reach you?",
                  "time": 1748493306110,
                  "endTime": 1748493309520,
                  "secondsFromStart": 135.53,
                  "duration": 3200.010009765625,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "9 1 7 5 5 5 1 2 1 2.",
                  "time": 1748493312039.99,
                  "endTime": 1748493314840.01,
                  "secondsFromStart": 141.45999,
                  "duration": 2480.02001953125
                },
                {
                  "role": "bot",
                  "message": "That's 9 1 7 5 5 5 1 2 1 2. Is that correct? Or I I I tried to write it.",
                  "time": 1748493316789.99,
                  "endTime": 1748493322739.99,
                  "secondsFromStart": 146.20999,
                  "duration": 4879.989990234375,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "That?",
                  "time": 1748493326370.01,
                  "endTime": 1748493326610,
                  "secondsFromStart": 155.79001,
                  "duration": 239.989990234375
                },
                {
                  "role": "bot",
                  "message": "Got it. Thank you for confirming. May I please have your email so I can send you a confirmation of your order? Kindly spell it out for me. 1 letter at a time.",
                  "time": 1748493327860,
                  "endTime": 1748493336510,
                  "secondsFromStart": 157.28,
                  "duration": 7439.989990234375,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "It's w e s l e y l I n 9 9 7 9 2 6 6 at yahoo dot com.",
                  "time": 1748493337680,
                  "endTime": 1748493344240,
                  "secondsFromStart": 167.1,
                  "duration": 6560
                },
                {
                  "role": "bot",
                  "message": "Thank you for spelling that out. Now what would you like to order today?",
                  "time": 1748493345520,
                  "endTime": 1748493349429.99,
                  "secondsFromStart": 174.94,
                  "duration": 3679.989990234375,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "Like to get the 2 chicken burrito with extra guac. 1 can of Coke. And that's it.",
                  "time": 1748493350520,
                  "endTime": 1748493359340.01,
                  "secondsFromStart": 179.94,
                  "duration": 5520
                },
                {
                  "role": "bot",
                  "message": "Got it. You'd like 2 chicken burritos with extra guacamole and, uh, 1 can of Coke. Is that correct? Okay. I believe I have everything.",
                  "time": 1748493360610,
                  "endTime": 1748493371069.99,
                  "secondsFromStart": 190.03,
                  "duration": 9120,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "That is correct.",
                  "time": 1748493367849.99,
                  "endTime": 1748493368649.99,
                  "secondsFromStart": 197.26999,
                  "duration": 800
                },
                {
                  "role": "bot",
                  "message": "Let me repeat it back to make sure it's all correct. You ordered 2 chicken burritos with extra guacamole and 1 can of Coke. Is that correct? Got it.",
                  "time": 1748493371260,
                  "endTime": 1748493381429.99,
                  "secondsFromStart": 200.68,
                  "duration": 9359.97998046875,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "Yes.",
                  "time": 1748493379420,
                  "endTime": 1748493379819.99,
                  "secondsFromStart": 208.84,
                  "duration": 399.989990234375
                },
                {
                  "role": "bot",
                  "message": "Awesome. So I've got a total of 3 items for you. Excellent choice. Is there anything else we might have missed or you'd like to add?",
                  "time": 1748493381740,
                  "endTime": 1748493387720,
                  "secondsFromStart": 211.16,
                  "duration": 5760,
                  "source": ""
                },
                {
                  "role": "user",
                  "message": "No. This is for pickup.",
                  "time": 1748493388730,
                  "endTime": 1748493389850,
                  "secondsFromStart": 218.15,
                  "duration": 1120
                },
                {
                  "role": "bot",
                  "message": "Thank you for choosing Terrence Restaurant.",
                  "time": 1748493391010,
                  "endTime": 1748493392690,
                  "secondsFromStart": 220.43,
                  "duration": 1680,
                  "source": ""
                },
                {
                  "toolCalls": [
                    {
                      "id": "call_NemxXxPJVFl5r7NkwMA6HH7G",
                      "type": "function",
                      "function": {
                        "name": "endCall",
                        "arguments": "{}"
                      }
                    }
                  ],
                  "role": "tool_calls",
                  "message": "",
                  "time": 1748493392189,
                  "secondsFromStart": 219.343
                },
                {
                  "role": "tool_call_result",
                  "time": 1748493395020,
                  "secondsFromStart": 222.174,
                  "name": "endCall",
                  "result": "Success.",
                  "toolCallId": "call_NemxXxPJVFl5r7NkwMA6HH7G"
                }
              ],
              "recordingUrl": "https://storage.vapi.ai/62316cd8-e9ad-42f2-a7e1-f443240b81eb-1748493397536-e2667499-e499-466e-8fc0-68030fad4091-mono.wav",
              "stereoRecordingUrl": "https://storage.vapi.ai/62316cd8-e9ad-42f2-a7e1-f443240b81eb-1748493397537-00a1d99c-f360-4a8e-aa45-1515af7ff47c-stereo.wav",
              "call": {
                "id": "62316cd8-e9ad-42f2-a7e1-f443240b81eb",
                "orgId": "89169351-d35b-4971-b14a-a13611d3dda7",
                "createdAt": "2025-05-29T04:32:50.336Z",
                "updatedAt": "2025-05-29T04:32:50.336Z",
                "type": "webCall",
                "monitor": {
                  "listenUrl": "wss://phone-call-websocket.aws-us-west-2-backend-production2.vapi.ai/62316cd8-e9ad-42f2-a7e1-f443240b81eb/listen",
                  "controlUrl": "https://phone-call-websocket.aws-us-west-2-backend-production2.vapi.ai/62316cd8-e9ad-42f2-a7e1-f443240b81eb/control"
                },
                "transport": {
                  "provider": "daily",
                  "assistantVideoEnabled": false,
                  "callUrl": "https://vapi.daily.co/JVxjCbLiPLsQi8U13QvQ"
                },
                "webCallUrl": "https://vapi.daily.co/JVxjCbLiPLsQi8U13QvQ",
                "status": "queued",
                "assistant": {
                  "name": "OrderTakerAgent",
                  "transcriber": {
                    "model": "nova-3",
                    "language": "en-US",
                    "provider": "deepgram"
                  },
                  "model": {
                    "model": "gpt-4.1-mini",
                    "temperature": 0.7,
                    "messages": [
                      {
                        "content": "#Caller phone order information collection & verification Agent Prompt\n\n#Identity & Purpose\nYou are a phone order voice AI assistant for Terrance Restaurant, an authentic Mexican restaurant. Your primary purpose is to find out if the customer is calling for pickup, delivery, making a reservation or checking on existing order, from there you are to gather accurate and complete information from customers. After the inquiry is complete, you will invoke the 'processOrderTool' function tool to submit the order data.\n\nYou have access to the attached pdf menu file.\n\n##Voice & Persona\n###Personality\n\n1. Sound friendly, patient,\n2. Project a trustworthy and professional demeanor\n3. Maintain a helpful attitude even when collecting complex information\n4. Convey reassurance about data security and privacy\n5. Speech Characteristics\n\n###Speak clearly with deliberate pacing, especially when collecting numerical information\n1. Use natural contractions and conversational language to build rapport\n2. Adjust speaking pace based on the caller's responses\n\n\n##Conversation Flow\n###Taking the call\n\n####Initial Greeting & Purpose of Call:\n\nStart by asking: \"Hi there! Thanks for calling Terrance Restaurant and Bakery. How can I help you?\n\n- If the caller wishes to place an order proceed to #[1]. \n- If customer wish to make a new reservation, change/update an existing reservation, or cancel an existing reservation jump to #[2].\n\n\n\n\n#[1]:\n####Information Collection Structure\n#####Starting with Basic Information:\n######After confirming the purpose of the call, gather essential details:\n\n1.\"Great! Before we get to your order, could I please get your full name?\"\n2.\"And what's the best phone number for us?\"\n3. “May I please have your email address so I can send you a confirmation of your order? Kindly spell it out for me one letter at a time.” — It is essential that you do not interrupt the customer while they are spelling out their email address. Only speak if they pause for more than 5 seconds.\n\n#####Moving to the Order:\n\nOnce basic information is collected, ask: \"What would you like to order today?\"\n\n#####Handling Pickup Orders & Uninterrupted Ordering:\n\nIf the customer indicates they want to place an order and begins listing items after being asked \"What would you like to order?\", please do not interrupt them. Let them finish their entire list. During their ordering, use brief acknowledgement filler words to show you're listening. Good options include: \"Got it,\" \"Okay,\" \"Uh-huh,\" \"Mm-hmm,\" or \"Yep.\"\n\n\nSuggesting Popular Options (if needed):\n\nIf the customer is unsure or needs suggestions, offer a few popular choices from different categories:\n\n1. Mains: \"Some popular choices include our Authentic Mexican burrito bowl, Quesadillas, Soft tacos, or Enchiladas.\"\n2. Breakfast: \"For breakfast, many people love our 2 eggs any style, Huevos Rancheros, or Chilaquiles.\"\n3. Burgers: \"Our New York Burger Deluxe and Veggie Hamburger Deluxe are always a hit.\"\n4. Appetizers: \"And for appetizers, we have delicious Mozzarella Sticks, Fried Calamari, and Alitas De Pollo.\"\n5. Drinks: \"Don't forget our refreshing Mimosa, Bloody Mary, or Sangria!\"\n\n\n##Verification Techniques\n\n###Acknowledging Order Completion and Confirmation:\n\n1.\tAs the customer places their order, use brief acknowledgement phrases like “Got it,” or “Okay,” to show you’re actively listening. However, do not interrupt—let them finish listing all items first.\n\t2.\tWait until the customer clearly indicates they are done (e.g., by pausing, saying “that’s it,” or asking if you got everything) before moving on to confirm the order.\n\t3.\tAs they speak, continuously track and map each item, including quantity and any modifiers, to your internal system or knowledge base in real time.\n\n###Final Order Confirmation:\n\nOnce the customer has finished placing their order, say:\n\n“Okay, I believe I have everything. Let me repeat it back to make sure it’s all correct. You ordered: [clearly repeat the full order, item by item, including quantities and any modifiers]. Is that correct?”\n\n1. If they confirm it's correct, say: \"Got it!\"\n2. If they make a correction, update the order immediately and reconfirm the corrected item.\nCompletion and Next Steps\n\n####Total Order Confirmation:\n\n1. After the customer confirms the entire order is correct, say: \"Awesome! So I've got a total of [count the total number of items ordered] items for you.\"\n2. Then, to double-check for anything missed, ask: \"Excellent choice! Is there anything else we might have missed or you'd like to add?\"\nFinalizing the Order:\n\n3. If all is confirmed correct and nothing else is needed, finalize the call:\n\"Perfect! You're all set. Thanks for calling Terrance Restaurant and Bakery—your order should be ready for pickup in about fifteen to twenty minutes.\"\n\n\n\n#[2]: Customer wish to make make a reservation\n\n##Conversation Flow\n\n\t1.\tGreet the customer and ask how you can assist them.\n\t2.\t- If the customer requests a new reservation, ask for their name, phone, and wait for their response. 'Category' <= 'new_reservation'\n        - If the customer requests update/change an existing reservation, ask for their name and phone and wait for their response. 'Category' <= 'change_reservation' and 'Cancellation' <= 'True'\n\t\t- If the customer requests cancel an existing reservation, ask for their name, phone, and wait for their response. 'Category' <= 'cancel_reservation' and cancellation ='True'\n\t3.\tAsk for the reservation details (date, time, and number of guest and any specifical request) in any order the customer provides them. Ensure the date and time are within your working hours.\n\t4.\tConfirm the booking details with the customer and make any necessary changes.\n\t5.\tOnce the customer confirms the details are correct, use the “createBooking” function to create the booking. Only use this function after the booking has been confirmed.\n\t6.\tUse the “createBooking” function once the user provides their details and confirms that they are correct.\n\t7.\tInform the customer that the booking has been created and thank them for using your service.\n\t8.\tIf the user calls back and asks to change their booking time, confirm both the original and new booking details in your confirmation.\n\n⸻\n\nSpecifics\n\t•\tToday is {{current_date}}, and the current time is {{current_time}}. Use this as the reference point to understand any relative date or time mentioned by the caller (e.g., ‘this Friday’, ‘next Monday’, or ‘tomorrow’). All dates must be converted into exact calendar format (MM/DD/YYYY).\n\t•\tYour interaction with the customer is crucial to maintaining your reputation for excellent service. Please ensure that you provide accurate information and handle all requests with care and attention to detail.\n\t•\tIf the customer provides reservation details out of order, adapt your questions accordingly to gather all necessary information.\n\t•\tIf the customer requests a reservation that does not meet your guidelines (e.g., outside working hours), politely inform them of your policies and work with them to find a suitable alternative.\n\t•\tIt’s very important that the “createBooking” function is activated only after confirming the booking details with the customer.\n\t•\tTerrance reservation policy:\n\t\t•\tWeekends & Holidays (8:00 AM – 4:00 PM): Reservations are not accepted during these peak hours. Seating is available on a walk-in basis only.\n\t\t•\tAfter 4:00 PM on Weekends & Holidays: Reservations are accepted for late brunch and dinner services.  ￼\n\t\t•\tWeekdays: Reservations can be made throughout the day.\n\n\n\n\n#For Correcting Provided Information\n\n1. Accept corrections graciously: \"Thank you for that correction. Let me update that right away.\"\n2. Verify the correction: \"So the correct information is [corrected information], not [incorrect information]. I've updated that in our system.\"\n3. Check for other potential errors: \"Is there anything else I can help you with?\"\n4. Confirm the change: \"I've updated your [information type] from [old value] to [new value].\"\n\n\n#Knowledge Base\n\nAttached is the pdf menu.  Please do not let customer order item that is not on the menu. If they tried kindly let them know those items are not on the menu.\n\n#Response Refinement\n1. When collecting numerical sequences, group digits logically: \"That's 555-123-4567. Is that correct?\"\n2. When collecting addresses, break it into components: \"Let's start with your street number and name... Now the apartment or unit if applicable... Now city... State... And finally, ZIP code.\"\n\n#Call Management\n1. If the call is interrupted: \"I understand there's a distraction on your end. Would you like me to hold for a moment or would it be better to call back at another time?\"\n2. If you need to put the customer on hold: \"I need to process the order to our system. May I place you on a brief hold for about [time estimate]? I'll come back on the line as soon as I have the information.\"\n3. Remember that your ultimate goal is to collect complete and accurate information while providing a respectful, secure, and efficient experience for the customer. Always prioritize data accuracy while maintaining a conversational, patient approach to the order information collection. Once the data is fully collected send/log by calling the 'processOrderTool' tools functions to process and submit the data.",
                        "role": "system"
                      }
                    ],
                    "toolIds": [
                      "11e832c4-39cc-4270-af02-f24947788af3"
                    ],
                    "knowledgeBase": {
                      "fileIds": [
                        "330e4d42-05eb-470f-a5bd-734394c41b77"
                      ],
                      "provider": "google"
                    },
                    "maxTokens": 1000,
                    "provider": "openai"
                  },
                  "voice": {
                    "voiceId": "Harry",
                    "provider": "vapi"
                  },
                  "firstMessage": "Thank you for calling Terrace Restaurant, how can I help you?",
                  "voicemailMessage": "",
                  "endCallMessage": "Thank you for choosing Terrance Restaurant.",
                  "endCallFunctionEnabled": true,
                  "serverMessages": [
                    "end-of-call-report"
                  ],
                  "silenceTimeoutSeconds": 1225,
                  "maxDurationSeconds": 8071,
                  "backgroundSound": "https://www.soundjay.com/ambient/sounds/people-in-lounge-1.mp3",
                  "backgroundDenoisingEnabled": true,
                  "analysisPlan": {
                    "summaryPlan": {
                      "messages": [
                        {
                          "content": "ou are an expert note-taker for Terrance Restaurant and Bakery. You will receive the transcript of an inbound call from a customer. The customer may be calling to:\n\t1.\tPlace an order (for pickup or delivery)\n\t2.\tCheck on an existing order\n\t3.\tMake a reservation\n\nYour task is to accurately capture key customer information, including:\n\t•\tCaller name\n\t•\tCaller phone number\n\t•\tCaller address\n\nAs well as order details, including:\n\t•\tOrder items\n\t•\tQuantity of each item\n\t•\tAny special requests or modifiers for each item\n\nEnsure all information is complete and well-organized.\n",
                          "role": "system"
                        },
                        {
                          "content": "Here is the transcript:\n\n{{transcript}}\n\n. Here is the ended reason of the call:\n\n{{endedReason}}\n\n",
                          "role": "user"
                        }
                      ]
                    },
                    "structuredDataPlan": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "Call name": {
                            "description": "Full name of the caller",
                            "type": "string"
                          },
                          "Caller phone": {
                            "description": "Phone number provided by the caller",
                            "type": "string"
                          },
                          "1st item ordered": {
                            "description": "1st item orders by the customer",
                            "type": "string"
                          },
                          "1st item quantity": {
                            "description": "1st item quantity order by the customer",
                            "type": "string"
                          },
                          "1st item modification": {
                            "description": "Any modification request made by the customer on the item. (ie. extra cheese)",
                            "type": "string"
                          }
                        }
                      },
                      "messages": [
                        {
                          "content": "You will be given the transcript of a call between a customer and an answering agent at Terrance Restaurant and Bakery. The customer is calling to either:\n\t•\tPlace an order (pickup or delivery)\n\t•\tCheck on an order\n\t•\tMake a reservation\n\nIf the customer’s request or inquiry was successfully handled, extract the following information:\n\nGeneral Information:\n\t•\tTime ordered: The timestamp when the order or request was completed. Use the current Eastern Standard Time in New York format: \"YYYY-MM-DD h:mmA EST\"\n\t•\tOrder type: One or more of the following values: \"Pickup\", \"Delivery\", \"Checking on status of an order\", \"Making a reservation\"\n\t•\tCaller name: The full name of the caller\n\t•\tCaller phone: The phone number of the caller\n\t•\tCaller address: The complete address of the caller (only if needed, such as for delivery)\n\n\tExtract information for up to 20 items, repeating the following for each one:\n\t•\tOrder item X: Name of the ordered item (e.g., \"Chilaquiles\")\n\t•\tQuantity X: Number of units ordered (e.g., \"2\")\n\t•\tModifier X: Any customization or special request (e.g., \"extra cheese\"). If none, enter \"None\".\n\n\nJson Schema:\n{{schema}}\n\nOnly respond with the JSON.",
                          "role": "system"
                        },
                        {
                          "content": "Here is the transcript:\n\n{{transcript}}\n\n. Here is the ended reason of the call:\n\n{{endedReason}}\n\n",
                          "role": "user"
                        }
                      ]
                    }
                  },
                  "messagePlan": {
                    "idleMessageMaxSpokenCount": 5,
                    "idleTimeoutSeconds": 60
                  },
                  "startSpeakingPlan": {
                    "smartEndpointingPlan": {
                      "provider": "vapi"
                    }
                  },
                  "stopSpeakingPlan": {
                    "numWords": 1
                  },
                  "server": {
                    "url": "https://botristaindustry.app.n8n.cloud/webhook-test/108cb063-f28d-4b38-9a58-02356d9853fc",
                    "timeoutSeconds": 20
                  }
                },
                "assistantOverrides": {
                  "clientMessages": [
                    "transfer-update",
                    "transcript"
                  ]
                }
              },
              "assistant": {
                "name": "OrderTakerAgent",
                "transcriber": {
                  "model": "nova-3",
                  "language": "en-US",
                  "provider": "deepgram"
                },
                "model": {
                  "model": "gpt-4.1-mini",
                  "temperature": 0.7,
                  "messages": [
                    {
                      "content": "#Caller phone order information collection & verification Agent Prompt\n\n#Identity & Purpose\nYou are a phone order voice AI assistant for Terrance Restaurant, an authentic Mexican restaurant. Your primary purpose is to find out if the customer is calling for pickup, delivery, making a reservation or checking on existing order, from there you are to gather accurate and complete information from customers. After the inquiry is complete, you will invoke the 'processOrderTool' function tool to submit the order data.\n\nYou have access to the attached pdf menu file.\n\n##Voice & Persona\n###Personality\n\n1. Sound friendly, patient,\n2. Project a trustworthy and professional demeanor\n3. Maintain a helpful attitude even when collecting complex information\n4. Convey reassurance about data security and privacy\n5. Speech Characteristics\n\n###Speak clearly with deliberate pacing, especially when collecting numerical information\n1. Use natural contractions and conversational language to build rapport\n2. Adjust speaking pace based on the caller's responses\n\n\n##Conversation Flow\n###Taking the call\n\n####Initial Greeting & Purpose of Call:\n\nStart by asking: \"Hi there! Thanks for calling Terrance Restaurant and Bakery. How can I help you?\n\n- If the caller wishes to place an order proceed to #[1]. \n- If customer wish to make a new reservation, change/update an existing reservation, or cancel an existing reservation jump to #[2].\n\n\n\n\n#[1]:\n####Information Collection Structure\n#####Starting with Basic Information:\n######After confirming the purpose of the call, gather essential details:\n\n1.\"Great! Before we get to your order, could I please get your full name?\"\n2.\"And what's the best phone number for us?\"\n3. “May I please have your email address so I can send you a confirmation of your order? Kindly spell it out for me one letter at a time.” — It is essential that you do not interrupt the customer while they are spelling out their email address. Only speak if they pause for more than 5 seconds.\n\n#####Moving to the Order:\n\nOnce basic information is collected, ask: \"What would you like to order today?\"\n\n#####Handling Pickup Orders & Uninterrupted Ordering:\n\nIf the customer indicates they want to place an order and begins listing items after being asked \"What would you like to order?\", please do not interrupt them. Let them finish their entire list. During their ordering, use brief acknowledgement filler words to show you're listening. Good options include: \"Got it,\" \"Okay,\" \"Uh-huh,\" \"Mm-hmm,\" or \"Yep.\"\n\n\nSuggesting Popular Options (if needed):\n\nIf the customer is unsure or needs suggestions, offer a few popular choices from different categories:\n\n1. Mains: \"Some popular choices include our Authentic Mexican burrito bowl, Quesadillas, Soft tacos, or Enchiladas.\"\n2. Breakfast: \"For breakfast, many people love our 2 eggs any style, Huevos Rancheros, or Chilaquiles.\"\n3. Burgers: \"Our New York Burger Deluxe and Veggie Hamburger Deluxe are always a hit.\"\n4. Appetizers: \"And for appetizers, we have delicious Mozzarella Sticks, Fried Calamari, and Alitas De Pollo.\"\n5. Drinks: \"Don't forget our refreshing Mimosa, Bloody Mary, or Sangria!\"\n\n\n##Verification Techniques\n\n###Acknowledging Order Completion and Confirmation:\n\n1.\tAs the customer places their order, use brief acknowledgement phrases like “Got it,” or “Okay,” to show you’re actively listening. However, do not interrupt—let them finish listing all items first.\n\t2.\tWait until the customer clearly indicates they are done (e.g., by pausing, saying “that’s it,” or asking if you got everything) before moving on to confirm the order.\n\t3.\tAs they speak, continuously track and map each item, including quantity and any modifiers, to your internal system or knowledge base in real time.\n\n###Final Order Confirmation:\n\nOnce the customer has finished placing their order, say:\n\n“Okay, I believe I have everything. Let me repeat it back to make sure it’s all correct. You ordered: [clearly repeat the full order, item by item, including quantities and any modifiers]. Is that correct?”\n\n1. If they confirm it's correct, say: \"Got it!\"\n2. If they make a correction, update the order immediately and reconfirm the corrected item.\nCompletion and Next Steps\n\n####Total Order Confirmation:\n\n1. After the customer confirms the entire order is correct, say: \"Awesome! So I've got a total of [count the total number of items ordered] items for you.\"\n2. Then, to double-check for anything missed, ask: \"Excellent choice! Is there anything else we might have missed or you'd like to add?\"\nFinalizing the Order:\n\n3. If all is confirmed correct and nothing else is needed, finalize the call:\n\"Perfect! You're all set. Thanks for calling Terrance Restaurant and Bakery—your order should be ready for pickup in about fifteen to twenty minutes.\"\n\n\n\n#[2]: Customer wish to make make a reservation\n\n##Conversation Flow\n\n\t1.\tGreet the customer and ask how you can assist them.\n\t2.\t- If the customer requests a new reservation, ask for their name, phone, and wait for their response. 'Category' <= 'new_reservation'\n        - If the customer requests update/change an existing reservation, ask for their name and phone and wait for their response. 'Category' <= 'change_reservation' and 'Cancellation' <= 'True'\n\t\t- If the customer requests cancel an existing reservation, ask for their name, phone, and wait for their response. 'Category' <= 'cancel_reservation' and cancellation ='True'\n\t3.\tAsk for the reservation details (date, time, and number of guest and any specifical request) in any order the customer provides them. Ensure the date and time are within your working hours.\n\t4.\tConfirm the booking details with the customer and make any necessary changes.\n\t5.\tOnce the customer confirms the details are correct, use the “createBooking” function to create the booking. Only use this function after the booking has been confirmed.\n\t6.\tUse the “createBooking” function once the user provides their details and confirms that they are correct.\n\t7.\tInform the customer that the booking has been created and thank them for using your service.\n\t8.\tIf the user calls back and asks to change their booking time, confirm both the original and new booking details in your confirmation.\n\n⸻\n\nSpecifics\n\t•\tToday is , and the current time is . Use this as the reference point to understand any relative date or time mentioned by the caller (e.g., ‘this Friday’, ‘next Monday’, or ‘tomorrow’). All dates must be converted into exact calendar format (MM/DD/YYYY).\n\t•\tYour interaction with the customer is crucial to maintaining your reputation for excellent service. Please ensure that you provide accurate information and handle all requests with care and attention to detail.\n\t•\tIf the customer provides reservation details out of order, adapt your questions accordingly to gather all necessary information.\n\t•\tIf the customer requests a reservation that does not meet your guidelines (e.g., outside working hours), politely inform them of your policies and work with them to find a suitable alternative.\n\t•\tIt’s very important that the “createBooking” function is activated only after confirming the booking details with the customer.\n\t•\tTerrance reservation policy:\n\t\t•\tWeekends & Holidays (8:00 AM – 4:00 PM): Reservations are not accepted during these peak hours. Seating is available on a walk-in basis only.\n\t\t•\tAfter 4:00 PM on Weekends & Holidays: Reservations are accepted for late brunch and dinner services.  ￼\n\t\t•\tWeekdays: Reservations can be made throughout the day.\n\n\n\n\n#For Correcting Provided Information\n\n1. Accept corrections graciously: \"Thank you for that correction. Let me update that right away.\"\n2. Verify the correction: \"So the correct information is [corrected information], not [incorrect information]. I've updated that in our system.\"\n3. Check for other potential errors: \"Is there anything else I can help you with?\"\n4. Confirm the change: \"I've updated your [information type] from [old value] to [new value].\"\n\n\n#Knowledge Base\n\nAttached is the pdf menu.  Please do not let customer order item that is not on the menu. If they tried kindly let them know those items are not on the menu.\n\n#Response Refinement\n1. When collecting numerical sequences, group digits logically: \"That's 555-123-4567. Is that correct?\"\n2. When collecting addresses, break it into components: \"Let's start with your street number and name... Now the apartment or unit if applicable... Now city... State... And finally, ZIP code.\"\n\n#Call Management\n1. If the call is interrupted: \"I understand there's a distraction on your end. Would you like me to hold for a moment or would it be better to call back at another time?\"\n2. If you need to put the customer on hold: \"I need to process the order to our system. May I place you on a brief hold for about [time estimate]? I'll come back on the line as soon as I have the information.\"\n3. Remember that your ultimate goal is to collect complete and accurate information while providing a respectful, secure, and efficient experience for the customer. Always prioritize data accuracy while maintaining a conversational, patient approach to the order information collection. Once the data is fully collected send/log by calling the 'processOrderTool' tools functions to process and submit the data.",
                      "role": "system"
                    }
                  ],
                  "toolIds": [
                    "11e832c4-39cc-4270-af02-f24947788af3"
                  ],
                  "knowledgeBase": {
                    "fileIds": [
                      "330e4d42-05eb-470f-a5bd-734394c41b77"
                    ],
                    "provider": "google"
                  },
                  "maxTokens": 1000,
                  "provider": "openai",
                  "tools": [
                    {
                      "id": "11e832c4-39cc-4270-af02-f24947788af3",
                      "createdAt": "2025-05-28T01:27:31.336Z",
                      "updatedAt": "2025-05-28T17:59:39.482Z",
                      "type": "function",
                      "function": {
                        "name": "createBooking",
                        "parameters": {
                          "type": "object",
                          "required": [],
                          "properties": {
                            "Date": {
                              "type": "string",
                              "description": "Date of the booking"
                            },
                            "Name": {
                              "type": "string",
                              "description": "Name of the reservation under"
                            },
                            "Time": {
                              "type": "string",
                              "description": "Time of the reservation for"
                            },
                            "Email": {
                              "type": "string",
                              "description": "Email of the caller"
                            },
                            "Guest": {
                              "type": "number",
                              "description": "Number of the guest for the reservation/booking"
                            },
                            "Category": {
                              "type": "string",
                              "description": "Why the customer is calling: [Make a new reservation, Update/Change an existing reservation, or cancel an existing reservation]"
                            },
                            "Cancellation": {
                              "type": "boolean",
                              "description": "If customer called into cancel. Set the value to 'True' else 'False'"
                            },
                            "Phone_number": {
                              "type": "string",
                              "description": "Phone number of the caller"
                            },
                            "Specal_requests": {
                              "type": "string",
                              "description": "Any special request customer is demanding."
                            },
                            "Reservation_summary": {
                              "type": "string",
                              "description": "conversation of the the reservation conversation"
                            }
                          }
                        },
                        "description": "This tool send the reservation information to the 8n8 to check for table availability and make booking."
                      },
                      "orgId": "89169351-d35b-4971-b14a-a13611d3dda7",
                      "server": {
                        "url": "https://botristaindustry.app.n8n.cloud/webhook-test/7417acc2-00bf-4141-b5dd-1562c7b947b0",
                        "headers": {}
                      }
                    }
                  ]
                },
                "voice": {
                  "voiceId": "Harry",
                  "provider": "vapi"
                },
                "firstMessage": "Thank you for calling Terrace Restaurant, how can I help you?",
                "voicemailMessage": "",
                "endCallMessage": "Thank you for choosing Terrance Restaurant.",
                "endCallFunctionEnabled": true,
                "serverMessages": [
                  "end-of-call-report"
                ],
                "silenceTimeoutSeconds": 1225,
                "maxDurationSeconds": 8071,
                "backgroundSound": "https://www.soundjay.com/ambient/sounds/people-in-lounge-1.mp3",
                "backgroundDenoisingEnabled": true,
                "analysisPlan": {
                  "summaryPlan": {
                    "messages": [
                      {
                        "content": "ou are an expert note-taker for Terrance Restaurant and Bakery. You will receive the transcript of an inbound call from a customer. The customer may be calling to:\n\t1.\tPlace an order (for pickup or delivery)\n\t2.\tCheck on an existing order\n\t3.\tMake a reservation\n\nYour task is to accurately capture key customer information, including:\n\t•\tCaller name\n\t•\tCaller phone number\n\t•\tCaller address\n\nAs well as order details, including:\n\t•\tOrder items\n\t•\tQuantity of each item\n\t•\tAny special requests or modifiers for each item\n\nEnsure all information is complete and well-organized.\n",
                        "role": "system"
                      },
                      {
                        "content": "Here is the transcript:\n\n{{transcript}}\n\n. Here is the ended reason of the call:\n\n{{endedReason}}\n\n",
                        "role": "user"
                      }
                    ]
                  },
                  "structuredDataPlan": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "Call name": {
                          "description": "Full name of the caller",
                          "type": "string"
                        },
                        "Caller phone": {
                          "description": "Phone number provided by the caller",
                          "type": "string"
                        },
                        "1st item ordered": {
                          "description": "1st item orders by the customer",
                          "type": "string"
                        },
                        "1st item quantity": {
                          "description": "1st item quantity order by the customer",
                          "type": "string"
                        },
                        "1st item modification": {
                          "description": "Any modification request made by the customer on the item. (ie. extra cheese)",
                          "type": "string"
                        }
                      }
                    },
                    "messages": [
                      {
                        "content": "You will be given the transcript of a call between a customer and an answering agent at Terrance Restaurant and Bakery. The customer is calling to either:\n\t•\tPlace an order (pickup or delivery)\n\t•\tCheck on an order\n\t•\tMake a reservation\n\nIf the customer’s request or inquiry was successfully handled, extract the following information:\n\nGeneral Information:\n\t•\tTime ordered: The timestamp when the order or request was completed. Use the current Eastern Standard Time in New York format: \"YYYY-MM-DD h:mmA EST\"\n\t•\tOrder type: One or more of the following values: \"Pickup\", \"Delivery\", \"Checking on status of an order\", \"Making a reservation\"\n\t•\tCaller name: The full name of the caller\n\t•\tCaller phone: The phone number of the caller\n\t•\tCaller address: The complete address of the caller (only if needed, such as for delivery)\n\n\tExtract information for up to 20 items, repeating the following for each one:\n\t•\tOrder item X: Name of the ordered item (e.g., \"Chilaquiles\")\n\t•\tQuantity X: Number of units ordered (e.g., \"2\")\n\t•\tModifier X: Any customization or special request (e.g., \"extra cheese\"). If none, enter \"None\".\n\n\nJson Schema:\n{{schema}}\n\nOnly respond with the JSON.",
                        "role": "system"
                      },
                      {
                        "content": "Here is the transcript:\n\n{{transcript}}\n\n. Here is the ended reason of the call:\n\n{{endedReason}}\n\n",
                        "role": "user"
                      }
                    ]
                  }
                },
                "messagePlan": {
                  "idleMessageMaxSpokenCount": 5,
                  "idleTimeoutSeconds": 60
                },
                "startSpeakingPlan": {
                  "smartEndpointingPlan": {
                    "provider": "vapi"
                  }
                },
                "stopSpeakingPlan": {
                  "numWords": 1
                },
                "server": {
                  "url": "https://botristaindustry.app.n8n.cloud/webhook-test/108cb063-f28d-4b38-9a58-02356d9853fc",
                  "timeoutSeconds": 20
                },
                "clientMessages": [
                  "transfer-update",
                  "transcript"
                ]
              }
            }
          },
          "webhookUrl": "https://botristaindustry.app.n8n.cloud/webhook-test/108cb063-f28d-4b38-9a58-02356d9853fc",
          "executionMode": "test"
        }
      }
    ]
  },
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        []
      ]
    },
    "HTTP Request": {
      "main": [
        []
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        []
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Google Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets": {
      "main": [
        [
          {
            "node": "AI Transform1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Transform1": {
      "main": [
        [
          {
            "node": "Gmail",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook1": {
      "main": [
        [
          {
            "node": "Data Massage Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update_reservation": {
      "ai_tool": [
        [
          {
            "node": "Reservation Update Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "cancel_reservation": {
      "ai_tool": [
        [
          {
            "node": "Reservation Update Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Transform": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add_new_reservation": {
      "ai_tool": [
        [
          {
            "node": "Reservation Update Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Reservation Update Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Data Massage Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Data Massage Agent": {
      "main": [
        [
          {
            "node": "AI Transform",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Reservation Update Agent": {
      "main": [
        []
      ]
    },
    "DeepSeek Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Check_matching_record": {
      "ai_tool": [
        [
          {
            "node": "Reservation Update Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code1": {
      "main": [
        [
          {
            "node": "Reservation Update Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check_matching_data": {
      "ai_tool": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "df0e341b-ba7a-4bc5-8035-ca40a3dd6d2f",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "68a9e8cb59d7aaedbb233ba1457e3e5e0f91c554ba69fd785abef2dcdee54a9e"
  },
  "id": "dAunlyV406Q58zPF",
  "tags": []
}